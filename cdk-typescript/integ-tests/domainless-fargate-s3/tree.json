{
  "version": "tree-0.1",
  "tree": {
    "id": "App",
    "path": "",
    "children": {
      "amazon-ecs-gmsa-linux-infrastructure": {
        "id": "amazon-ecs-gmsa-linux-infrastructure",
        "path": "amazon-ecs-gmsa-linux-infrastructure",
        "children": {
          "vpc": {
            "id": "vpc",
            "path": "amazon-ecs-gmsa-linux-infrastructure/vpc",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::EC2::VPC",
                  "aws:cdk:cloudformation:props": {
                    "cidrBlock": "10.0.0.0/26",
                    "enableDnsHostnames": true,
                    "enableDnsSupport": true,
                    "instanceTenancy": "default",
                    "tags": [
                      {
                        "key": "Name",
                        "value": "amazon-ecs-gmsa-linux-infrastructure/vpc"
                      }
                    ]
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ec2.CfnVPC",
                  "version": "2.129.0"
                }
              },
              "PublicSubnet1": {
                "id": "PublicSubnet1",
                "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet1",
                "children": {
                  "Subnet": {
                    "id": "Subnet",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet1/Subnet",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::Subnet",
                      "aws:cdk:cloudformation:props": {
                        "availabilityZone": {
                          "Fn::Select": [
                            0,
                            {
                              "Fn::GetAZs": ""
                            }
                          ]
                        },
                        "cidrBlock": "10.0.0.0/28",
                        "mapPublicIpOnLaunch": true,
                        "tags": [
                          {
                            "key": "aws-cdk:subnet-name",
                            "value": "Public"
                          },
                          {
                            "key": "aws-cdk:subnet-type",
                            "value": "Public"
                          },
                          {
                            "key": "Name",
                            "value": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet1"
                          }
                        ],
                        "vpcId": {
                          "Ref": "vpcA2121C38"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnSubnet",
                      "version": "2.129.0"
                    }
                  },
                  "Acl": {
                    "id": "Acl",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet1/Acl",
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.Resource",
                      "version": "2.129.0"
                    }
                  },
                  "RouteTable": {
                    "id": "RouteTable",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet1/RouteTable",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::RouteTable",
                      "aws:cdk:cloudformation:props": {
                        "tags": [
                          {
                            "key": "Name",
                            "value": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet1"
                          }
                        ],
                        "vpcId": {
                          "Ref": "vpcA2121C38"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnRouteTable",
                      "version": "2.129.0"
                    }
                  },
                  "RouteTableAssociation": {
                    "id": "RouteTableAssociation",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet1/RouteTableAssociation",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::SubnetRouteTableAssociation",
                      "aws:cdk:cloudformation:props": {
                        "routeTableId": {
                          "Ref": "vpcPublicSubnet1RouteTable48A2DF9B"
                        },
                        "subnetId": {
                          "Ref": "vpcPublicSubnet1Subnet2E65531E"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation",
                      "version": "2.129.0"
                    }
                  },
                  "DefaultRoute": {
                    "id": "DefaultRoute",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet1/DefaultRoute",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::Route",
                      "aws:cdk:cloudformation:props": {
                        "destinationCidrBlock": "0.0.0.0/0",
                        "gatewayId": {
                          "Ref": "vpcIGWE57CBDCA"
                        },
                        "routeTableId": {
                          "Ref": "vpcPublicSubnet1RouteTable48A2DF9B"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnRoute",
                      "version": "2.129.0"
                    }
                  },
                  "EIP": {
                    "id": "EIP",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet1/EIP",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::EIP",
                      "aws:cdk:cloudformation:props": {
                        "domain": "vpc",
                        "tags": [
                          {
                            "key": "Name",
                            "value": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet1"
                          }
                        ]
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnEIP",
                      "version": "2.129.0"
                    }
                  },
                  "NATGateway": {
                    "id": "NATGateway",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet1/NATGateway",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::NatGateway",
                      "aws:cdk:cloudformation:props": {
                        "allocationId": {
                          "Fn::GetAtt": [
                            "vpcPublicSubnet1EIPDA49DCBE",
                            "AllocationId"
                          ]
                        },
                        "subnetId": {
                          "Ref": "vpcPublicSubnet1Subnet2E65531E"
                        },
                        "tags": [
                          {
                            "key": "Name",
                            "value": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet1"
                          }
                        ]
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnNatGateway",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ec2.PublicSubnet",
                  "version": "2.129.0"
                }
              },
              "PublicSubnet2": {
                "id": "PublicSubnet2",
                "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet2",
                "children": {
                  "Subnet": {
                    "id": "Subnet",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet2/Subnet",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::Subnet",
                      "aws:cdk:cloudformation:props": {
                        "availabilityZone": {
                          "Fn::Select": [
                            1,
                            {
                              "Fn::GetAZs": ""
                            }
                          ]
                        },
                        "cidrBlock": "10.0.0.16/28",
                        "mapPublicIpOnLaunch": true,
                        "tags": [
                          {
                            "key": "aws-cdk:subnet-name",
                            "value": "Public"
                          },
                          {
                            "key": "aws-cdk:subnet-type",
                            "value": "Public"
                          },
                          {
                            "key": "Name",
                            "value": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet2"
                          }
                        ],
                        "vpcId": {
                          "Ref": "vpcA2121C38"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnSubnet",
                      "version": "2.129.0"
                    }
                  },
                  "Acl": {
                    "id": "Acl",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet2/Acl",
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.Resource",
                      "version": "2.129.0"
                    }
                  },
                  "RouteTable": {
                    "id": "RouteTable",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet2/RouteTable",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::RouteTable",
                      "aws:cdk:cloudformation:props": {
                        "tags": [
                          {
                            "key": "Name",
                            "value": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet2"
                          }
                        ],
                        "vpcId": {
                          "Ref": "vpcA2121C38"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnRouteTable",
                      "version": "2.129.0"
                    }
                  },
                  "RouteTableAssociation": {
                    "id": "RouteTableAssociation",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet2/RouteTableAssociation",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::SubnetRouteTableAssociation",
                      "aws:cdk:cloudformation:props": {
                        "routeTableId": {
                          "Ref": "vpcPublicSubnet2RouteTableEB40D4CB"
                        },
                        "subnetId": {
                          "Ref": "vpcPublicSubnet2Subnet009B674F"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation",
                      "version": "2.129.0"
                    }
                  },
                  "DefaultRoute": {
                    "id": "DefaultRoute",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet2/DefaultRoute",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::Route",
                      "aws:cdk:cloudformation:props": {
                        "destinationCidrBlock": "0.0.0.0/0",
                        "gatewayId": {
                          "Ref": "vpcIGWE57CBDCA"
                        },
                        "routeTableId": {
                          "Ref": "vpcPublicSubnet2RouteTableEB40D4CB"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnRoute",
                      "version": "2.129.0"
                    }
                  },
                  "EIP": {
                    "id": "EIP",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet2/EIP",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::EIP",
                      "aws:cdk:cloudformation:props": {
                        "domain": "vpc",
                        "tags": [
                          {
                            "key": "Name",
                            "value": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet2"
                          }
                        ]
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnEIP",
                      "version": "2.129.0"
                    }
                  },
                  "NATGateway": {
                    "id": "NATGateway",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet2/NATGateway",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::NatGateway",
                      "aws:cdk:cloudformation:props": {
                        "allocationId": {
                          "Fn::GetAtt": [
                            "vpcPublicSubnet2EIP9B3743B1",
                            "AllocationId"
                          ]
                        },
                        "subnetId": {
                          "Ref": "vpcPublicSubnet2Subnet009B674F"
                        },
                        "tags": [
                          {
                            "key": "Name",
                            "value": "amazon-ecs-gmsa-linux-infrastructure/vpc/PublicSubnet2"
                          }
                        ]
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnNatGateway",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ec2.PublicSubnet",
                  "version": "2.129.0"
                }
              },
              "PrivateSubnet1": {
                "id": "PrivateSubnet1",
                "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PrivateSubnet1",
                "children": {
                  "Subnet": {
                    "id": "Subnet",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PrivateSubnet1/Subnet",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::Subnet",
                      "aws:cdk:cloudformation:props": {
                        "availabilityZone": {
                          "Fn::Select": [
                            0,
                            {
                              "Fn::GetAZs": ""
                            }
                          ]
                        },
                        "cidrBlock": "10.0.0.32/28",
                        "mapPublicIpOnLaunch": false,
                        "tags": [
                          {
                            "key": "aws-cdk:subnet-name",
                            "value": "Private"
                          },
                          {
                            "key": "aws-cdk:subnet-type",
                            "value": "Private"
                          },
                          {
                            "key": "Name",
                            "value": "amazon-ecs-gmsa-linux-infrastructure/vpc/PrivateSubnet1"
                          }
                        ],
                        "vpcId": {
                          "Ref": "vpcA2121C38"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnSubnet",
                      "version": "2.129.0"
                    }
                  },
                  "Acl": {
                    "id": "Acl",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PrivateSubnet1/Acl",
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.Resource",
                      "version": "2.129.0"
                    }
                  },
                  "RouteTable": {
                    "id": "RouteTable",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PrivateSubnet1/RouteTable",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::RouteTable",
                      "aws:cdk:cloudformation:props": {
                        "tags": [
                          {
                            "key": "Name",
                            "value": "amazon-ecs-gmsa-linux-infrastructure/vpc/PrivateSubnet1"
                          }
                        ],
                        "vpcId": {
                          "Ref": "vpcA2121C38"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnRouteTable",
                      "version": "2.129.0"
                    }
                  },
                  "RouteTableAssociation": {
                    "id": "RouteTableAssociation",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PrivateSubnet1/RouteTableAssociation",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::SubnetRouteTableAssociation",
                      "aws:cdk:cloudformation:props": {
                        "routeTableId": {
                          "Ref": "vpcPrivateSubnet1RouteTableB41A48CC"
                        },
                        "subnetId": {
                          "Ref": "vpcPrivateSubnet1Subnet934893E8"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation",
                      "version": "2.129.0"
                    }
                  },
                  "DefaultRoute": {
                    "id": "DefaultRoute",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PrivateSubnet1/DefaultRoute",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::Route",
                      "aws:cdk:cloudformation:props": {
                        "destinationCidrBlock": "0.0.0.0/0",
                        "natGatewayId": {
                          "Ref": "vpcPublicSubnet1NATGateway9C16659E"
                        },
                        "routeTableId": {
                          "Ref": "vpcPrivateSubnet1RouteTableB41A48CC"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnRoute",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ec2.PrivateSubnet",
                  "version": "2.129.0"
                }
              },
              "PrivateSubnet2": {
                "id": "PrivateSubnet2",
                "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PrivateSubnet2",
                "children": {
                  "Subnet": {
                    "id": "Subnet",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PrivateSubnet2/Subnet",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::Subnet",
                      "aws:cdk:cloudformation:props": {
                        "availabilityZone": {
                          "Fn::Select": [
                            1,
                            {
                              "Fn::GetAZs": ""
                            }
                          ]
                        },
                        "cidrBlock": "10.0.0.48/28",
                        "mapPublicIpOnLaunch": false,
                        "tags": [
                          {
                            "key": "aws-cdk:subnet-name",
                            "value": "Private"
                          },
                          {
                            "key": "aws-cdk:subnet-type",
                            "value": "Private"
                          },
                          {
                            "key": "Name",
                            "value": "amazon-ecs-gmsa-linux-infrastructure/vpc/PrivateSubnet2"
                          }
                        ],
                        "vpcId": {
                          "Ref": "vpcA2121C38"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnSubnet",
                      "version": "2.129.0"
                    }
                  },
                  "Acl": {
                    "id": "Acl",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PrivateSubnet2/Acl",
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.Resource",
                      "version": "2.129.0"
                    }
                  },
                  "RouteTable": {
                    "id": "RouteTable",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PrivateSubnet2/RouteTable",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::RouteTable",
                      "aws:cdk:cloudformation:props": {
                        "tags": [
                          {
                            "key": "Name",
                            "value": "amazon-ecs-gmsa-linux-infrastructure/vpc/PrivateSubnet2"
                          }
                        ],
                        "vpcId": {
                          "Ref": "vpcA2121C38"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnRouteTable",
                      "version": "2.129.0"
                    }
                  },
                  "RouteTableAssociation": {
                    "id": "RouteTableAssociation",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PrivateSubnet2/RouteTableAssociation",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::SubnetRouteTableAssociation",
                      "aws:cdk:cloudformation:props": {
                        "routeTableId": {
                          "Ref": "vpcPrivateSubnet2RouteTable7280F23E"
                        },
                        "subnetId": {
                          "Ref": "vpcPrivateSubnet2Subnet7031C2BA"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnSubnetRouteTableAssociation",
                      "version": "2.129.0"
                    }
                  },
                  "DefaultRoute": {
                    "id": "DefaultRoute",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/PrivateSubnet2/DefaultRoute",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::Route",
                      "aws:cdk:cloudformation:props": {
                        "destinationCidrBlock": "0.0.0.0/0",
                        "natGatewayId": {
                          "Ref": "vpcPublicSubnet2NATGateway9B8AE11A"
                        },
                        "routeTableId": {
                          "Ref": "vpcPrivateSubnet2RouteTable7280F23E"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnRoute",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ec2.PrivateSubnet",
                  "version": "2.129.0"
                }
              },
              "IGW": {
                "id": "IGW",
                "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/IGW",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::EC2::InternetGateway",
                  "aws:cdk:cloudformation:props": {
                    "tags": [
                      {
                        "key": "Name",
                        "value": "amazon-ecs-gmsa-linux-infrastructure/vpc"
                      }
                    ]
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ec2.CfnInternetGateway",
                  "version": "2.129.0"
                }
              },
              "VPCGW": {
                "id": "VPCGW",
                "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/VPCGW",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::EC2::VPCGatewayAttachment",
                  "aws:cdk:cloudformation:props": {
                    "internetGatewayId": {
                      "Ref": "vpcIGWE57CBDCA"
                    },
                    "vpcId": {
                      "Ref": "vpcA2121C38"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ec2.CfnVPCGatewayAttachment",
                  "version": "2.129.0"
                }
              },
              "FlowLogCloudWatch": {
                "id": "FlowLogCloudWatch",
                "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/FlowLogCloudWatch",
                "children": {
                  "IAMRole": {
                    "id": "IAMRole",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/FlowLogCloudWatch/IAMRole",
                    "children": {
                      "ImportIAMRole": {
                        "id": "ImportIAMRole",
                        "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/FlowLogCloudWatch/IAMRole/ImportIAMRole",
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.Resource",
                          "version": "2.129.0"
                        }
                      },
                      "Resource": {
                        "id": "Resource",
                        "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/FlowLogCloudWatch/IAMRole/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::IAM::Role",
                          "aws:cdk:cloudformation:props": {
                            "assumeRolePolicyDocument": {
                              "Statement": [
                                {
                                  "Action": "sts:AssumeRole",
                                  "Effect": "Allow",
                                  "Principal": {
                                    "Service": "vpc-flow-logs.amazonaws.com"
                                  }
                                }
                              ],
                              "Version": "2012-10-17"
                            },
                            "tags": [
                              {
                                "key": "Name",
                                "value": "amazon-ecs-gmsa-linux-infrastructure/vpc/FlowLogCloudWatch"
                              }
                            ]
                          }
                        },
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.aws_iam.CfnRole",
                          "version": "2.129.0"
                        }
                      },
                      "DefaultPolicy": {
                        "id": "DefaultPolicy",
                        "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/FlowLogCloudWatch/IAMRole/DefaultPolicy",
                        "children": {
                          "Resource": {
                            "id": "Resource",
                            "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/FlowLogCloudWatch/IAMRole/DefaultPolicy/Resource",
                            "attributes": {
                              "aws:cdk:cloudformation:type": "AWS::IAM::Policy",
                              "aws:cdk:cloudformation:props": {
                                "policyDocument": {
                                  "Statement": [
                                    {
                                      "Action": [
                                        "logs:CreateLogStream",
                                        "logs:DescribeLogStreams",
                                        "logs:PutLogEvents"
                                      ],
                                      "Effect": "Allow",
                                      "Resource": {
                                        "Fn::GetAtt": [
                                          "vpcFlowLogCloudWatchLogGroup6B336362",
                                          "Arn"
                                        ]
                                      }
                                    },
                                    {
                                      "Action": "iam:PassRole",
                                      "Effect": "Allow",
                                      "Resource": {
                                        "Fn::GetAtt": [
                                          "vpcFlowLogCloudWatchIAMRoleF5137BA9",
                                          "Arn"
                                        ]
                                      }
                                    }
                                  ],
                                  "Version": "2012-10-17"
                                },
                                "policyName": "vpcFlowLogCloudWatchIAMRoleDefaultPolicy81671661",
                                "roles": [
                                  {
                                    "Ref": "vpcFlowLogCloudWatchIAMRoleF5137BA9"
                                  }
                                ]
                              }
                            },
                            "constructInfo": {
                              "fqn": "aws-cdk-lib.aws_iam.CfnPolicy",
                              "version": "2.129.0"
                            }
                          }
                        },
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.aws_iam.Policy",
                          "version": "2.129.0"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_iam.Role",
                      "version": "2.129.0"
                    }
                  },
                  "LogGroup": {
                    "id": "LogGroup",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/FlowLogCloudWatch/LogGroup",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/FlowLogCloudWatch/LogGroup/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::Logs::LogGroup",
                          "aws:cdk:cloudformation:props": {
                            "retentionInDays": 731,
                            "tags": [
                              {
                                "key": "Name",
                                "value": "amazon-ecs-gmsa-linux-infrastructure/vpc/FlowLogCloudWatch"
                              }
                            ]
                          }
                        },
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.aws_logs.CfnLogGroup",
                          "version": "2.129.0"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_logs.LogGroup",
                      "version": "2.129.0"
                    }
                  },
                  "FlowLog": {
                    "id": "FlowLog",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/vpc/FlowLogCloudWatch/FlowLog",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::FlowLog",
                      "aws:cdk:cloudformation:props": {
                        "deliverLogsPermissionArn": {
                          "Fn::GetAtt": [
                            "vpcFlowLogCloudWatchIAMRoleF5137BA9",
                            "Arn"
                          ]
                        },
                        "logDestinationType": "cloud-watch-logs",
                        "logGroupName": {
                          "Ref": "vpcFlowLogCloudWatchLogGroup6B336362"
                        },
                        "resourceId": {
                          "Ref": "vpcA2121C38"
                        },
                        "resourceType": "VPC",
                        "tags": [
                          {
                            "key": "Name",
                            "value": "amazon-ecs-gmsa-linux-infrastructure/vpc/FlowLogCloudWatch"
                          }
                        ],
                        "trafficType": "REJECT"
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnFlowLog",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ec2.FlowLog",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_ec2.Vpc",
              "version": "2.129.0"
            }
          },
          "active-directory-admin-password-secret": {
            "id": "active-directory-admin-password-secret",
            "path": "amazon-ecs-gmsa-linux-infrastructure/active-directory-admin-password-secret",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-infrastructure/active-directory-admin-password-secret/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::SecretsManager::Secret",
                  "aws:cdk:cloudformation:props": {
                    "generateSecretString": {
                      "excludeCharacters": "\"'"
                    },
                    "name": "amazon-ecs-gmsa-linux/active-directory-administrator-password"
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_secretsmanager.CfnSecret",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_secretsmanager.Secret",
              "version": "2.129.0"
            }
          },
          "ActiveDirectoryAdminPasswordSecretARN": {
            "id": "ActiveDirectoryAdminPasswordSecretARN",
            "path": "amazon-ecs-gmsa-linux-infrastructure/ActiveDirectoryAdminPasswordSecretARN",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnOutput",
              "version": "2.129.0"
            }
          },
          "active-directory": {
            "id": "active-directory",
            "path": "amazon-ecs-gmsa-linux-infrastructure/active-directory",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::DirectoryService::MicrosoftAD",
              "aws:cdk:cloudformation:props": {
                "edition": "Standard",
                "name": "directory.amazon-ecs-gmsa-linux.com",
                "password": {
                  "Fn::Join": [
                    "",
                    [
                      "{{resolve:secretsmanager:",
                      {
                        "Ref": "activedirectoryadminpasswordsecretB1F8F377"
                      },
                      ":SecretString:::}}"
                    ]
                  ]
                },
                "vpcSettings": {
                  "vpcId": {
                    "Ref": "vpcA2121C38"
                  },
                  "subnetIds": [
                    {
                      "Ref": "vpcPrivateSubnet1Subnet934893E8"
                    },
                    {
                      "Ref": "vpcPrivateSubnet2Subnet7031C2BA"
                    }
                  ]
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_directoryservice.CfnMicrosoftAD",
              "version": "2.129.0"
            }
          },
          "active-directory-id-ssm-parameter": {
            "id": "active-directory-id-ssm-parameter",
            "path": "amazon-ecs-gmsa-linux-infrastructure/active-directory-id-ssm-parameter",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-infrastructure/active-directory-id-ssm-parameter/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::SSM::Parameter",
                  "aws:cdk:cloudformation:props": {
                    "allowedPattern": ".*",
                    "description": "Active Directory ID",
                    "name": "/amazon-ecs-gmsa-linux/active-directory-id",
                    "tier": "Standard",
                    "type": "String",
                    "value": {
                      "Fn::GetAtt": [
                        "activedirectory",
                        "Alias"
                      ]
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ssm.CfnParameter",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_ssm.StringParameter",
              "version": "2.129.0"
            }
          },
          "active-directory-dhcp-ops": {
            "id": "active-directory-dhcp-ops",
            "path": "amazon-ecs-gmsa-linux-infrastructure/active-directory-dhcp-ops",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::DHCPOptions",
              "aws:cdk:cloudformation:props": {
                "domainName": "directory.amazon-ecs-gmsa-linux.com",
                "domainNameServers": {
                  "Fn::GetAtt": [
                    "activedirectory",
                    "DnsIpAddresses"
                  ]
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_ec2.CfnDHCPOptions",
              "version": "2.129.0"
            }
          },
          "directory-dhcp-ops-association": {
            "id": "directory-dhcp-ops-association",
            "path": "amazon-ecs-gmsa-linux-infrastructure/directory-dhcp-ops-association",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::EC2::VPCDHCPOptionsAssociation",
              "aws:cdk:cloudformation:props": {
                "dhcpOptionsId": {
                  "Ref": "activedirectorydhcpops"
                },
                "vpcId": {
                  "Ref": "vpcA2121C38"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_ec2.CfnVPCDHCPOptionsAssociation",
              "version": "2.129.0"
            }
          },
          "ecs-cluster": {
            "id": "ecs-cluster",
            "path": "amazon-ecs-gmsa-linux-infrastructure/ecs-cluster",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-infrastructure/ecs-cluster/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::ECS::Cluster",
                  "aws:cdk:cloudformation:props": {
                    "clusterName": "amazon-ecs-gmsa-linux",
                    "clusterSettings": [
                      {
                        "name": "containerInsights",
                        "value": "enabled"
                      }
                    ]
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ecs.CfnCluster",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_ecs.Cluster",
              "version": "2.129.0"
            }
          },
          "cred-fetcher-identity-secret": {
            "id": "cred-fetcher-identity-secret",
            "path": "amazon-ecs-gmsa-linux-infrastructure/cred-fetcher-identity-secret",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-infrastructure/cred-fetcher-identity-secret/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::SecretsManager::Secret",
                  "aws:cdk:cloudformation:props": {
                    "generateSecretString": {
                      "excludeCharacters": "\"'",
                      "generateStringKey": "password",
                      "secretStringTemplate": "{\"username\":\"SampleWebAppUser\",\"domainName\":\"directory.amazon-ecs-gmsa-linux.com\"}"
                    },
                    "name": "amazon-ecs-gmsa-linux/credentials-fetcher-identity"
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_secretsmanager.CfnSecret",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_secretsmanager.Secret",
              "version": "2.129.0"
            }
          },
          "domain-join-ssm-document": {
            "id": "domain-join-ssm-document",
            "path": "amazon-ecs-gmsa-linux-infrastructure/domain-join-ssm-document",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::SSM::Document",
              "aws:cdk:cloudformation:props": {
                "content": {
                  "schemaVersion": "2.2",
                  "description": "Joins an EC2 instance to the directory.amazon-ecs-gmsa-linux.com domain using seamless joining",
                  "mainSteps": [
                    {
                      "action": "aws:domainJoin",
                      "name": "domainJoin",
                      "inputs": {
                        "directoryId": {
                          "Fn::GetAtt": [
                            "activedirectory",
                            "Alias"
                          ]
                        },
                        "directoryName": "directory.amazon-ecs-gmsa-linux.com"
                      }
                    }
                  ]
                },
                "documentType": "Command"
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_ssm.CfnDocument",
              "version": "2.129.0"
            }
          },
          "active-directory-seamless-join-secret": {
            "id": "active-directory-seamless-join-secret",
            "path": "amazon-ecs-gmsa-linux-infrastructure/active-directory-seamless-join-secret",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-infrastructure/active-directory-seamless-join-secret/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::SecretsManager::Secret",
                  "aws:cdk:cloudformation:props": {
                    "name": {
                      "Fn::Join": [
                        "",
                        [
                          "aws/directory-services/",
                          {
                            "Fn::GetAtt": [
                              "activedirectory",
                              "Alias"
                            ]
                          },
                          "/seamless-domain-join"
                        ]
                      ]
                    },
                    "secretString": {
                      "Fn::Join": [
                        "",
                        [
                          "{\"awsSeamlessDomainUsername\":\"admin\",\"awsSeamlessDomainPassword\":\"{{resolve:secretsmanager:",
                          {
                            "Ref": "activedirectoryadminpasswordsecretB1F8F377"
                          },
                          ":SecretString:::}}\"}"
                        ]
                      ]
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_secretsmanager.CfnSecret",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_secretsmanager.Secret",
              "version": "2.129.0"
            }
          },
          "domain-join-ssm-document-alt": {
            "id": "domain-join-ssm-document-alt",
            "path": "amazon-ecs-gmsa-linux-infrastructure/domain-join-ssm-document-alt",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::SSM::Document",
              "aws:cdk:cloudformation:props": {
                "content": {
                  "schemaVersion": "2.2",
                  "description": "Joins an ECS container instance to the directory.amazon-ecs-gmsa-linux.com domain using the realm CLI",
                  "mainSteps": [
                    {
                      "action": "aws:runShellScript",
                      "name": "domainJoinEcs",
                      "inputs": {
                        "timeoutSeconds": "160",
                        "runCommand": [
                          "echo \"Waiting 80 seconds...\"",
                          "sleep 80s",
                          "dnf install jq -y",
                          "echo \"Retrieving AD admin password...\"",
                          {
                            "Fn::Join": [
                              "",
                              [
                                "adAdminPassword=$(aws secretsmanager get-secret-value --secret-id ",
                                {
                                  "Fn::Join": [
                                    "-",
                                    [
                                      {
                                        "Fn::Select": [
                                          0,
                                          {
                                            "Fn::Split": [
                                              "-",
                                              {
                                                "Fn::Select": [
                                                  6,
                                                  {
                                                    "Fn::Split": [
                                                      ":",
                                                      {
                                                        "Ref": "activedirectoryadminpasswordsecretB1F8F377"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "Fn::Select": [
                                          1,
                                          {
                                            "Fn::Split": [
                                              "-",
                                              {
                                                "Fn::Select": [
                                                  6,
                                                  {
                                                    "Fn::Split": [
                                                      ":",
                                                      {
                                                        "Ref": "activedirectoryadminpasswordsecretB1F8F377"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "Fn::Select": [
                                          2,
                                          {
                                            "Fn::Split": [
                                              "-",
                                              {
                                                "Fn::Select": [
                                                  6,
                                                  {
                                                    "Fn::Split": [
                                                      ":",
                                                      {
                                                        "Ref": "activedirectoryadminpasswordsecretB1F8F377"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "Fn::Select": [
                                          3,
                                          {
                                            "Fn::Split": [
                                              "-",
                                              {
                                                "Fn::Select": [
                                                  6,
                                                  {
                                                    "Fn::Split": [
                                                      ":",
                                                      {
                                                        "Ref": "activedirectoryadminpasswordsecretB1F8F377"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "Fn::Select": [
                                          4,
                                          {
                                            "Fn::Split": [
                                              "-",
                                              {
                                                "Fn::Select": [
                                                  6,
                                                  {
                                                    "Fn::Split": [
                                                      ":",
                                                      {
                                                        "Ref": "activedirectoryadminpasswordsecretB1F8F377"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "Fn::Select": [
                                          5,
                                          {
                                            "Fn::Split": [
                                              "-",
                                              {
                                                "Fn::Select": [
                                                  6,
                                                  {
                                                    "Fn::Split": [
                                                      ":",
                                                      {
                                                        "Ref": "activedirectoryadminpasswordsecretB1F8F377"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      },
                                      {
                                        "Fn::Select": [
                                          6,
                                          {
                                            "Fn::Split": [
                                              "-",
                                              {
                                                "Fn::Select": [
                                                  6,
                                                  {
                                                    "Fn::Split": [
                                                      ":",
                                                      {
                                                        "Ref": "activedirectoryadminpasswordsecretB1F8F377"
                                                      }
                                                    ]
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  ]
                                },
                                ")"
                              ]
                            ]
                          },
                          "echo \"Joining the AD domain...\"",
                          "echo \"${adAdminPassword}\" | jq -r '.SecretString' | realm join -U admin@DIRECTORY.AMAZON-ECS-GMSA-LINUX.COM directory.amazon-ecs-gmsa-linux.com --verbose",
                          "echo \"Restaring the ECS container instance...\"",
                          "systemctl stop ecs",
                          "systemctl start ecs"
                        ]
                      }
                    }
                  ]
                },
                "documentType": "Command"
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_ssm.CfnDocument",
              "version": "2.129.0"
            }
          },
          "ecs-cluster-asg-domain-join-ssm-association": {
            "id": "ecs-cluster-asg-domain-join-ssm-association",
            "path": "amazon-ecs-gmsa-linux-infrastructure/ecs-cluster-asg-domain-join-ssm-association",
            "attributes": {
              "aws:cdk:cloudformation:type": "AWS::SSM::Association",
              "aws:cdk:cloudformation:props": {
                "associationName": "amazon-ecs-gmsa-linux-AD-Domian-Join",
                "name": {
                  "Ref": "domainjoinssmdocument"
                },
                "targets": [
                  {
                    "key": "tag:ad-domain-join",
                    "values": [
                      "amazon-ecs-gmsa-linux"
                    ]
                  }
                ]
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_ssm.CfnAssociation",
              "version": "2.129.0"
            }
          },
          "credspec-ssm-parameter": {
            "id": "credspec-ssm-parameter",
            "path": "amazon-ecs-gmsa-linux-infrastructure/credspec-ssm-parameter",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-infrastructure/credspec-ssm-parameter/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::SSM::Parameter",
                  "aws:cdk:cloudformation:props": {
                    "allowedPattern": ".*",
                    "description": "gMSA CredSpec",
                    "name": "/amazon-ecs-gmsa-linux/credspec",
                    "tier": "Standard",
                    "type": "String",
                    "value": "RUN Generate-CredSpec.ps1 to populate this parameter"
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ssm.CfnParameter",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_ssm.StringParameter",
              "version": "2.129.0"
            }
          },
          "credspec-s3-bucket": {
            "id": "credspec-s3-bucket",
            "path": "amazon-ecs-gmsa-linux-infrastructure/credspec-s3-bucket",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-infrastructure/credspec-s3-bucket/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::S3::Bucket",
                  "aws:cdk:cloudformation:props": {
                    "bucketEncryption": {
                      "serverSideEncryptionConfiguration": [
                        {
                          "serverSideEncryptionByDefault": {
                            "sseAlgorithm": "AES256"
                          }
                        }
                      ]
                    },
                    "publicAccessBlockConfiguration": {
                      "blockPublicAcls": true,
                      "blockPublicPolicy": true,
                      "ignorePublicAcls": true,
                      "restrictPublicBuckets": true
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_s3.CfnBucket",
                  "version": "2.129.0"
                }
              },
              "Policy": {
                "id": "Policy",
                "path": "amazon-ecs-gmsa-linux-infrastructure/credspec-s3-bucket/Policy",
                "children": {
                  "Resource": {
                    "id": "Resource",
                    "path": "amazon-ecs-gmsa-linux-infrastructure/credspec-s3-bucket/Policy/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::S3::BucketPolicy",
                      "aws:cdk:cloudformation:props": {
                        "bucket": {
                          "Ref": "credspecs3bucket2AC0FC3A"
                        },
                        "policyDocument": {
                          "Statement": [
                            {
                              "Action": "s3:*",
                              "Condition": {
                                "Bool": {
                                  "aws:SecureTransport": "false"
                                }
                              },
                              "Effect": "Deny",
                              "Principal": {
                                "AWS": "*"
                              },
                              "Resource": [
                                {
                                  "Fn::GetAtt": [
                                    "credspecs3bucket2AC0FC3A",
                                    "Arn"
                                  ]
                                },
                                {
                                  "Fn::Join": [
                                    "",
                                    [
                                      {
                                        "Fn::GetAtt": [
                                          "credspecs3bucket2AC0FC3A",
                                          "Arn"
                                        ]
                                      },
                                      "/*"
                                    ]
                                  ]
                                }
                              ]
                            }
                          ],
                          "Version": "2012-10-17"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_s3.CfnBucketPolicy",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_s3.BucketPolicy",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_s3.Bucket",
              "version": "2.129.0"
            }
          },
          "Exports": {
            "id": "Exports",
            "path": "amazon-ecs-gmsa-linux-infrastructure/Exports",
            "children": {
              "Output{\"Ref\":\"vpcPrivateSubnet1Subnet934893E8\"}": {
                "id": "Output{\"Ref\":\"vpcPrivateSubnet1Subnet934893E8\"}",
                "path": "amazon-ecs-gmsa-linux-infrastructure/Exports/Output{\"Ref\":\"vpcPrivateSubnet1Subnet934893E8\"}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "Output{\"Ref\":\"vpcPrivateSubnet2Subnet7031C2BA\"}": {
                "id": "Output{\"Ref\":\"vpcPrivateSubnet2Subnet7031C2BA\"}",
                "path": "amazon-ecs-gmsa-linux-infrastructure/Exports/Output{\"Ref\":\"vpcPrivateSubnet2Subnet7031C2BA\"}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "Output{\"Ref\":\"vpcA2121C38\"}": {
                "id": "Output{\"Ref\":\"vpcA2121C38\"}",
                "path": "amazon-ecs-gmsa-linux-infrastructure/Exports/Output{\"Ref\":\"vpcA2121C38\"}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "Output{\"Fn::GetAtt\":[\"activedirectory\",\"Alias\"]}": {
                "id": "Output{\"Fn::GetAtt\":[\"activedirectory\",\"Alias\"]}",
                "path": "amazon-ecs-gmsa-linux-infrastructure/Exports/Output{\"Fn::GetAtt\":[\"activedirectory\",\"Alias\"]}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "Output{\"Ref\":\"activedirectoryadminpasswordsecretB1F8F377\"}": {
                "id": "Output{\"Ref\":\"activedirectoryadminpasswordsecretB1F8F377\"}",
                "path": "amazon-ecs-gmsa-linux-infrastructure/Exports/Output{\"Ref\":\"activedirectoryadminpasswordsecretB1F8F377\"}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "Output{\"Ref\":\"credfetcheridentitysecretFEBFB2F2\"}": {
                "id": "Output{\"Ref\":\"credfetcheridentitysecretFEBFB2F2\"}",
                "path": "amazon-ecs-gmsa-linux-infrastructure/Exports/Output{\"Ref\":\"credfetcheridentitysecretFEBFB2F2\"}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "Output{\"Ref\":\"credspecssmparameter4DB3D748\"}": {
                "id": "Output{\"Ref\":\"credspecssmparameter4DB3D748\"}",
                "path": "amazon-ecs-gmsa-linux-infrastructure/Exports/Output{\"Ref\":\"credspecssmparameter4DB3D748\"}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "Output{\"Fn::GetAtt\":[\"credspecs3bucket2AC0FC3A\",\"Arn\"]}": {
                "id": "Output{\"Fn::GetAtt\":[\"credspecs3bucket2AC0FC3A\",\"Arn\"]}",
                "path": "amazon-ecs-gmsa-linux-infrastructure/Exports/Output{\"Fn::GetAtt\":[\"credspecs3bucket2AC0FC3A\",\"Arn\"]}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "Output{\"Ref\":\"vpcPublicSubnet1Subnet2E65531E\"}": {
                "id": "Output{\"Ref\":\"vpcPublicSubnet1Subnet2E65531E\"}",
                "path": "amazon-ecs-gmsa-linux-infrastructure/Exports/Output{\"Ref\":\"vpcPublicSubnet1Subnet2E65531E\"}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "Output{\"Ref\":\"credspecs3bucket2AC0FC3A\"}": {
                "id": "Output{\"Ref\":\"credspecs3bucket2AC0FC3A\"}",
                "path": "amazon-ecs-gmsa-linux-infrastructure/Exports/Output{\"Ref\":\"credspecs3bucket2AC0FC3A\"}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "Output{\"Ref\":\"domainjoinssmdocument\"}": {
                "id": "Output{\"Ref\":\"domainjoinssmdocument\"}",
                "path": "amazon-ecs-gmsa-linux-infrastructure/Exports/Output{\"Ref\":\"domainjoinssmdocument\"}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "Output{\"Ref\":\"vpcPublicSubnet2Subnet009B674F\"}": {
                "id": "Output{\"Ref\":\"vpcPublicSubnet2Subnet009B674F\"}",
                "path": "amazon-ecs-gmsa-linux-infrastructure/Exports/Output{\"Ref\":\"vpcPublicSubnet2Subnet009B674F\"}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "constructs.Construct",
              "version": "10.2.70"
            }
          },
          "BootstrapVersion": {
            "id": "BootstrapVersion",
            "path": "amazon-ecs-gmsa-linux-infrastructure/BootstrapVersion",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnParameter",
              "version": "2.129.0"
            }
          },
          "CheckBootstrapVersion": {
            "id": "CheckBootstrapVersion",
            "path": "amazon-ecs-gmsa-linux-infrastructure/CheckBootstrapVersion",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnRule",
              "version": "2.129.0"
            }
          }
        },
        "constructInfo": {
          "fqn": "aws-cdk-lib.Stack",
          "version": "2.129.0"
        }
      },
      "amazon-ecs-gmsa-linux-database": {
        "id": "amazon-ecs-gmsa-linux-database",
        "path": "amazon-ecs-gmsa-linux-database",
        "children": {
          "web-sql-rds": {
            "id": "web-sql-rds",
            "path": "amazon-ecs-gmsa-linux-database/web-sql-rds",
            "children": {
              "SubnetGroup": {
                "id": "SubnetGroup",
                "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/SubnetGroup",
                "children": {
                  "Default": {
                    "id": "Default",
                    "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/SubnetGroup/Default",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::RDS::DBSubnetGroup",
                      "aws:cdk:cloudformation:props": {
                        "dbSubnetGroupDescription": "Subnet group for web-sql-rds database",
                        "subnetIds": [
                          {
                            "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefvpcPrivateSubnet1Subnet934893E8236E2271"
                          },
                          {
                            "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefvpcPrivateSubnet2Subnet7031C2BA60DCB1EE"
                          }
                        ]
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_rds.CfnDBSubnetGroup",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_rds.SubnetGroup",
                  "version": "2.129.0"
                }
              },
              "SecurityGroup": {
                "id": "SecurityGroup",
                "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/SecurityGroup",
                "children": {
                  "Resource": {
                    "id": "Resource",
                    "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/SecurityGroup/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroup",
                      "aws:cdk:cloudformation:props": {
                        "groupDescription": "Security group for web-sql-rds database",
                        "securityGroupEgress": [
                          {
                            "cidrIp": "0.0.0.0/0",
                            "description": "Allow all outbound traffic by default",
                            "ipProtocol": "-1"
                          }
                        ],
                        "vpcId": {
                          "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefvpcA2121C384D1B3CDE"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnSecurityGroup",
                      "version": "2.129.0"
                    }
                  },
                  "from amazonecsgmsalinuxdatabasewebsqlrdsSecurityGroup60623415:{IndirectPort}": {
                    "id": "from amazonecsgmsalinuxdatabasewebsqlrdsSecurityGroup60623415:{IndirectPort}",
                    "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/SecurityGroup/from amazonecsgmsalinuxdatabasewebsqlrdsSecurityGroup60623415:{IndirectPort}",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupIngress",
                      "aws:cdk:cloudformation:props": {
                        "description": "from amazonecsgmsalinuxdatabasewebsqlrdsSecurityGroup60623415:{IndirectPort}",
                        "fromPort": {
                          "Fn::GetAtt": [
                            "websqlrds54E6B542",
                            "Endpoint.Port"
                          ]
                        },
                        "groupId": {
                          "Fn::GetAtt": [
                            "websqlrdsSecurityGroup41387490",
                            "GroupId"
                          ]
                        },
                        "ipProtocol": "tcp",
                        "sourceSecurityGroupId": {
                          "Fn::GetAtt": [
                            "websqlrdsSecurityGroup41387490",
                            "GroupId"
                          ]
                        },
                        "toPort": {
                          "Fn::GetAtt": [
                            "websqlrds54E6B542",
                            "Endpoint.Port"
                          ]
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ec2.SecurityGroup",
                  "version": "2.129.0"
                }
              },
              "Secret": {
                "id": "Secret",
                "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/Secret",
                "children": {
                  "Resource": {
                    "id": "Resource",
                    "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/Secret/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::SecretsManager::Secret",
                      "aws:cdk:cloudformation:props": {
                        "description": {
                          "Fn::Join": [
                            "",
                            [
                              "Generated by the CDK for stack: ",
                              {
                                "Ref": "AWS::StackName"
                              }
                            ]
                          ]
                        },
                        "generateSecretString": {
                          "passwordLength": 30,
                          "secretStringTemplate": "{\"username\":\"web_dbo\"}",
                          "generateStringKey": "password",
                          "excludeCharacters": " %+~`#$&*()|[]{}:;<>?!'/@\"\\"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_secretsmanager.CfnSecret",
                      "version": "2.129.0"
                    }
                  },
                  "Attachment": {
                    "id": "Attachment",
                    "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/Secret/Attachment",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/Secret/Attachment/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::SecretsManager::SecretTargetAttachment",
                          "aws:cdk:cloudformation:props": {
                            "secretId": {
                              "Ref": "amazonecsgmsalinuxdatabasewebsqlrdsSecret63E60E8B3fdaad7efa858a3daf9490cf0a702aeb"
                            },
                            "targetId": {
                              "Ref": "websqlrds54E6B542"
                            },
                            "targetType": "AWS::RDS::DBInstance"
                          }
                        },
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.aws_secretsmanager.CfnSecretTargetAttachment",
                          "version": "2.129.0"
                        }
                      },
                      "RotationSchedule": {
                        "id": "RotationSchedule",
                        "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/Secret/Attachment/RotationSchedule",
                        "children": {
                          "Resource": {
                            "id": "Resource",
                            "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/Secret/Attachment/RotationSchedule/Resource",
                            "attributes": {
                              "aws:cdk:cloudformation:type": "AWS::SecretsManager::RotationSchedule",
                              "aws:cdk:cloudformation:props": {
                                "rotationLambdaArn": {
                                  "Fn::GetAtt": [
                                    "websqlrdsRotationSingleUserC61EC05A",
                                    "Outputs.RotationLambdaARN"
                                  ]
                                },
                                "rotationRules": {
                                  "scheduleExpression": "rate(30 days)"
                                },
                                "secretId": {
                                  "Ref": "websqlrdsSecretAttachment4A99E182"
                                }
                              }
                            },
                            "constructInfo": {
                              "fqn": "aws-cdk-lib.aws_secretsmanager.CfnRotationSchedule",
                              "version": "2.129.0"
                            }
                          }
                        },
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.aws_secretsmanager.RotationSchedule",
                          "version": "2.129.0"
                        }
                      },
                      "Policy": {
                        "id": "Policy",
                        "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/Secret/Attachment/Policy",
                        "children": {
                          "Resource": {
                            "id": "Resource",
                            "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/Secret/Attachment/Policy/Resource",
                            "attributes": {
                              "aws:cdk:cloudformation:type": "AWS::SecretsManager::ResourcePolicy",
                              "aws:cdk:cloudformation:props": {
                                "resourcePolicy": {
                                  "Statement": [
                                    {
                                      "Action": "secretsmanager:DeleteSecret",
                                      "Effect": "Deny",
                                      "Principal": {
                                        "AWS": {
                                          "Fn::Join": [
                                            "",
                                            [
                                              "arn:",
                                              {
                                                "Ref": "AWS::Partition"
                                              },
                                              ":iam::",
                                              {
                                                "Ref": "AWS::AccountId"
                                              },
                                              ":root"
                                            ]
                                          ]
                                        }
                                      },
                                      "Resource": "*"
                                    }
                                  ],
                                  "Version": "2012-10-17"
                                },
                                "secretId": {
                                  "Ref": "websqlrdsSecretAttachment4A99E182"
                                }
                              }
                            },
                            "constructInfo": {
                              "fqn": "aws-cdk-lib.aws_secretsmanager.CfnResourcePolicy",
                              "version": "2.129.0"
                            }
                          }
                        },
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.aws_secretsmanager.ResourcePolicy",
                          "version": "2.129.0"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_secretsmanager.SecretTargetAttachment",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_rds.DatabaseSecret",
                  "version": "2.129.0"
                }
              },
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::RDS::DBInstance",
                  "aws:cdk:cloudformation:props": {
                    "allocatedStorage": "100",
                    "autoMinorVersionUpgrade": true,
                    "copyTagsToSnapshot": true,
                    "dbInstanceClass": "db.t3.xlarge",
                    "dbSubnetGroupName": {
                      "Ref": "websqlrdsSubnetGroup1BD486EE"
                    },
                    "deletionProtection": false,
                    "domain": {
                      "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputFnGetAttactivedirectoryAlias6D90A2A9"
                    },
                    "domainIamRoleName": {
                      "Ref": "rdsroleF9D5EF8C"
                    },
                    "engine": "sqlserver-web",
                    "engineVersion": "15.00",
                    "licenseModel": "license-included",
                    "masterUsername": "web_dbo",
                    "masterUserPassword": {
                      "Fn::Join": [
                        "",
                        [
                          "{{resolve:secretsmanager:",
                          {
                            "Ref": "amazonecsgmsalinuxdatabasewebsqlrdsSecret63E60E8B3fdaad7efa858a3daf9490cf0a702aeb"
                          },
                          ":SecretString:password::}}"
                        ]
                      ]
                    },
                    "publiclyAccessible": false,
                    "storageEncrypted": true,
                    "storageType": "gp2",
                    "vpcSecurityGroups": [
                      {
                        "Fn::GetAtt": [
                          "websqlrdsSecurityGroup41387490",
                          "GroupId"
                        ]
                      }
                    ]
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_rds.CfnDBInstance",
                  "version": "2.129.0"
                }
              },
              "RotationSingleUser": {
                "id": "RotationSingleUser",
                "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/RotationSingleUser",
                "children": {
                  "SARMapping": {
                    "id": "SARMapping",
                    "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/RotationSingleUser/SARMapping",
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.CfnMapping",
                      "version": "2.129.0"
                    }
                  },
                  "Resource": {
                    "id": "Resource",
                    "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/RotationSingleUser/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::Serverless::Application",
                      "aws:cdk:cloudformation:props": {
                        "location": {
                          "applicationId": {
                            "Fn::FindInMap": [
                              "websqlrdsRotationSingleUserSARMapping2D0893BE",
                              {
                                "Ref": "AWS::Partition"
                              },
                              "applicationId"
                            ]
                          },
                          "semanticVersion": {
                            "Fn::FindInMap": [
                              "websqlrdsRotationSingleUserSARMapping2D0893BE",
                              {
                                "Ref": "AWS::Partition"
                              },
                              "semanticVersion"
                            ]
                          }
                        },
                        "parameters": {
                          "endpoint": {
                            "Fn::Join": [
                              "",
                              [
                                "https://secretsmanager.us-west-2.",
                                {
                                  "Ref": "AWS::URLSuffix"
                                }
                              ]
                            ]
                          },
                          "functionName": "amazonecsgmsalinuxdatabasewebsqlrdsRotationSingleUserFE0DAC34",
                          "vpcSubnetIds": {
                            "Fn::Join": [
                              "",
                              [
                                {
                                  "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefvpcPrivateSubnet1Subnet934893E8236E2271"
                                },
                                ",",
                                {
                                  "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefvpcPrivateSubnet2Subnet7031C2BA60DCB1EE"
                                }
                              ]
                            ]
                          },
                          "vpcSecurityGroupIds": {
                            "Fn::GetAtt": [
                              "websqlrdsSecurityGroup41387490",
                              "GroupId"
                            ]
                          },
                          "excludeCharacters": " %+~`#$&*()|[]{}:;<>?!'/@\"\\"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_sam.CfnApplication",
                      "version": "2.129.0"
                    }
                  },
                  "RotationLambda": {
                    "id": "RotationLambda",
                    "path": "amazon-ecs-gmsa-linux-database/web-sql-rds/RotationSingleUser/RotationLambda",
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_lambda.FunctionBase",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_secretsmanager.SecretRotation",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_rds.DatabaseInstance",
              "version": "2.129.0"
            }
          },
          "sql-server-credentials-secret-arn": {
            "id": "sql-server-credentials-secret-arn",
            "path": "amazon-ecs-gmsa-linux-database/sql-server-credentials-secret-arn",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-database/sql-server-credentials-secret-arn/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::SSM::Parameter",
                  "aws:cdk:cloudformation:props": {
                    "allowedPattern": ".*",
                    "description": "ARN of the secret containing the database credentials",
                    "name": "/amazon-ecs-gmsa-linux/web-site/sql-server-credentials-secret-arn",
                    "tier": "Standard",
                    "type": "String",
                    "value": {
                      "Ref": "websqlrdsSecretAttachment4A99E182"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ssm.CfnParameter",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_ssm.StringParameter",
              "version": "2.129.0"
            }
          },
          "rds-role": {
            "id": "rds-role",
            "path": "amazon-ecs-gmsa-linux-database/rds-role",
            "children": {
              "Importrds-role": {
                "id": "Importrds-role",
                "path": "amazon-ecs-gmsa-linux-database/rds-role/Importrds-role",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.Resource",
                  "version": "2.129.0"
                }
              },
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-database/rds-role/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::IAM::Role",
                  "aws:cdk:cloudformation:props": {
                    "assumeRolePolicyDocument": {
                      "Statement": [
                        {
                          "Action": "sts:AssumeRole",
                          "Effect": "Allow",
                          "Principal": {
                            "Service": "rds.amazonaws.com"
                          }
                        }
                      ],
                      "Version": "2012-10-17"
                    },
                    "managedPolicyArns": [
                      {
                        "Fn::Join": [
                          "",
                          [
                            "arn:",
                            {
                              "Ref": "AWS::Partition"
                            },
                            ":iam::aws:policy/service-role/AmazonRDSDirectoryServiceAccess"
                          ]
                        ]
                      }
                    ]
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_iam.CfnRole",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_iam.Role",
              "version": "2.129.0"
            }
          },
          "DBInstanceIdentifier": {
            "id": "DBInstanceIdentifier",
            "path": "amazon-ecs-gmsa-linux-database/DBInstanceIdentifier",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnOutput",
              "version": "2.129.0"
            }
          },
          "DBInstanceEndpointAddress": {
            "id": "DBInstanceEndpointAddress",
            "path": "amazon-ecs-gmsa-linux-database/DBInstanceEndpointAddress",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnOutput",
              "version": "2.129.0"
            }
          },
          "DBInstanceCredentialsSecretARN": {
            "id": "DBInstanceCredentialsSecretARN",
            "path": "amazon-ecs-gmsa-linux-database/DBInstanceCredentialsSecretARN",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnOutput",
              "version": "2.129.0"
            }
          },
          "Exports": {
            "id": "Exports",
            "path": "amazon-ecs-gmsa-linux-database/Exports",
            "children": {
              "Output{\"Fn::GetAtt\":[\"websqlrdsSecurityGroup41387490\",\"GroupId\"]}": {
                "id": "Output{\"Fn::GetAtt\":[\"websqlrdsSecurityGroup41387490\",\"GroupId\"]}",
                "path": "amazon-ecs-gmsa-linux-database/Exports/Output{\"Fn::GetAtt\":[\"websqlrdsSecurityGroup41387490\",\"GroupId\"]}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "Output{\"Ref\":\"websqlrdsSecretAttachment4A99E182\"}": {
                "id": "Output{\"Ref\":\"websqlrdsSecretAttachment4A99E182\"}",
                "path": "amazon-ecs-gmsa-linux-database/Exports/Output{\"Ref\":\"websqlrdsSecretAttachment4A99E182\"}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "Output{\"Ref\":\"amazonecsgmsalinuxdatabasewebsqlrdsSecret63E60E8B3fdaad7efa858a3daf9490cf0a702aeb\"}": {
                "id": "Output{\"Ref\":\"amazonecsgmsalinuxdatabasewebsqlrdsSecret63E60E8B3fdaad7efa858a3daf9490cf0a702aeb\"}",
                "path": "amazon-ecs-gmsa-linux-database/Exports/Output{\"Ref\":\"amazonecsgmsalinuxdatabasewebsqlrdsSecret63E60E8B3fdaad7efa858a3daf9490cf0a702aeb\"}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "Output{\"Fn::GetAtt\":[\"websqlrds54E6B542\",\"Endpoint.Address\"]}": {
                "id": "Output{\"Fn::GetAtt\":[\"websqlrds54E6B542\",\"Endpoint.Address\"]}",
                "path": "amazon-ecs-gmsa-linux-database/Exports/Output{\"Fn::GetAtt\":[\"websqlrds54E6B542\",\"Endpoint.Address\"]}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "Output{\"Ref\":\"websqlrds54E6B542\"}": {
                "id": "Output{\"Ref\":\"websqlrds54E6B542\"}",
                "path": "amazon-ecs-gmsa-linux-database/Exports/Output{\"Ref\":\"websqlrds54E6B542\"}",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "constructs.Construct",
              "version": "10.2.70"
            }
          },
          "BootstrapVersion": {
            "id": "BootstrapVersion",
            "path": "amazon-ecs-gmsa-linux-database/BootstrapVersion",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnParameter",
              "version": "2.129.0"
            }
          },
          "CheckBootstrapVersion": {
            "id": "CheckBootstrapVersion",
            "path": "amazon-ecs-gmsa-linux-database/CheckBootstrapVersion",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnRule",
              "version": "2.129.0"
            }
          }
        },
        "constructInfo": {
          "fqn": "aws-cdk-lib.Stack",
          "version": "2.129.0"
        }
      },
      "amazon-ecs-gmsa-linux-bastion": {
        "id": "amazon-ecs-gmsa-linux-bastion",
        "path": "amazon-ecs-gmsa-linux-bastion",
        "children": {
          "ec2-key-pair": {
            "id": "ec2-key-pair",
            "path": "amazon-ecs-gmsa-linux-bastion/ec2-key-pair",
            "constructInfo": {
              "fqn": "aws-cdk-lib.Resource",
              "version": "2.129.0"
            }
          },
          "active-directory-management-instance": {
            "id": "active-directory-management-instance",
            "path": "amazon-ecs-gmsa-linux-bastion/active-directory-management-instance",
            "children": {
              "InstanceSecurityGroup": {
                "id": "InstanceSecurityGroup",
                "path": "amazon-ecs-gmsa-linux-bastion/active-directory-management-instance/InstanceSecurityGroup",
                "children": {
                  "Resource": {
                    "id": "Resource",
                    "path": "amazon-ecs-gmsa-linux-bastion/active-directory-management-instance/InstanceSecurityGroup/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroup",
                      "aws:cdk:cloudformation:props": {
                        "groupDescription": "amazon-ecs-gmsa-linux-bastion/active-directory-management-instance/InstanceSecurityGroup",
                        "securityGroupEgress": [
                          {
                            "cidrIp": "0.0.0.0/0",
                            "description": "Allow all outbound traffic by default",
                            "ipProtocol": "-1"
                          }
                        ],
                        "securityGroupIngress": [
                          {
                            "cidrIp": "127.0.0.0/32",
                            "ipProtocol": "tcp",
                            "fromPort": 3389,
                            "toPort": 3389,
                            "description": "from 127.0.0.0/32:3389"
                          }
                        ],
                        "tags": [
                          {
                            "key": "ad-domain-join",
                            "value": "amazon-ecs-gmsa-linux"
                          },
                          {
                            "key": "Name",
                            "value": "amazon-ecs-gmsa-linux-bastion/active-directory-management-instance"
                          }
                        ],
                        "vpcId": {
                          "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefvpcA2121C384D1B3CDE"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnSecurityGroup",
                      "version": "2.129.0"
                    }
                  },
                  "amazonecsgmsalinuxdatabasewebsqlrdsSecurityGroup60623415:1433 to": {
                    "id": "amazonecsgmsalinuxdatabasewebsqlrdsSecurityGroup60623415:1433 to",
                    "path": "amazon-ecs-gmsa-linux-bastion/active-directory-management-instance/InstanceSecurityGroup/amazonecsgmsalinuxdatabasewebsqlrdsSecurityGroup60623415:1433 to",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupIngress",
                      "aws:cdk:cloudformation:props": {
                        "description": "from AD management instance",
                        "fromPort": 1433,
                        "groupId": {
                          "Fn::ImportValue": "amazon-ecs-gmsa-linux-database:ExportsOutputFnGetAttwebsqlrdsSecurityGroup41387490GroupId0BC29D94"
                        },
                        "ipProtocol": "tcp",
                        "sourceSecurityGroupId": {
                          "Fn::GetAtt": [
                            "activedirectorymanagementinstanceInstanceSecurityGroup90D500F7",
                            "GroupId"
                          ]
                        },
                        "toPort": 1433
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ec2.SecurityGroup",
                  "version": "2.129.0"
                }
              },
              "InstanceRole": {
                "id": "InstanceRole",
                "path": "amazon-ecs-gmsa-linux-bastion/active-directory-management-instance/InstanceRole",
                "children": {
                  "ImportInstanceRole": {
                    "id": "ImportInstanceRole",
                    "path": "amazon-ecs-gmsa-linux-bastion/active-directory-management-instance/InstanceRole/ImportInstanceRole",
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.Resource",
                      "version": "2.129.0"
                    }
                  },
                  "Resource": {
                    "id": "Resource",
                    "path": "amazon-ecs-gmsa-linux-bastion/active-directory-management-instance/InstanceRole/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::IAM::Role",
                      "aws:cdk:cloudformation:props": {
                        "assumeRolePolicyDocument": {
                          "Statement": [
                            {
                              "Action": "sts:AssumeRole",
                              "Effect": "Allow",
                              "Principal": {
                                "Service": "ec2.amazonaws.com"
                              }
                            }
                          ],
                          "Version": "2012-10-17"
                        },
                        "managedPolicyArns": [
                          {
                            "Fn::Join": [
                              "",
                              [
                                "arn:",
                                {
                                  "Ref": "AWS::Partition"
                                },
                                ":iam::aws:policy/AmazonSSMManagedInstanceCore"
                              ]
                            ]
                          },
                          {
                            "Fn::Join": [
                              "",
                              [
                                "arn:",
                                {
                                  "Ref": "AWS::Partition"
                                },
                                ":iam::aws:policy/AmazonSSMDirectoryServiceAccess"
                              ]
                            ]
                          }
                        ],
                        "tags": [
                          {
                            "key": "ad-domain-join",
                            "value": "amazon-ecs-gmsa-linux"
                          },
                          {
                            "key": "Name",
                            "value": "amazon-ecs-gmsa-linux-bastion/active-directory-management-instance"
                          }
                        ]
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_iam.CfnRole",
                      "version": "2.129.0"
                    }
                  },
                  "DefaultPolicy": {
                    "id": "DefaultPolicy",
                    "path": "amazon-ecs-gmsa-linux-bastion/active-directory-management-instance/InstanceRole/DefaultPolicy",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "amazon-ecs-gmsa-linux-bastion/active-directory-management-instance/InstanceRole/DefaultPolicy/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::IAM::Policy",
                          "aws:cdk:cloudformation:props": {
                            "policyDocument": {
                              "Statement": [
                                {
                                  "Action": [
                                    "secretsmanager:DescribeSecret",
                                    "secretsmanager:GetSecretValue"
                                  ],
                                  "Effect": "Allow",
                                  "Resource": [
                                    {
                                      "Fn::ImportValue": "amazon-ecs-gmsa-linux-database:ExportsOutputRefwebsqlrdsSecretAttachment4A99E18296C3D383"
                                    },
                                    {
                                      "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefactivedirectoryadminpasswordsecretB1F8F377D9936D0C"
                                    },
                                    {
                                      "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefcredfetcheridentitysecretFEBFB2F237ACC848"
                                    }
                                  ]
                                },
                                {
                                  "Action": [
                                    "ssm:DescribeParameters",
                                    "ssm:GetParameter",
                                    "ssm:GetParameterHistory",
                                    "ssm:GetParameters",
                                    "ssm:PutParameter"
                                  ],
                                  "Effect": "Allow",
                                  "Resource": {
                                    "Fn::Join": [
                                      "",
                                      [
                                        "arn:",
                                        {
                                          "Ref": "AWS::Partition"
                                        },
                                        ":ssm:us-west-2:",
                                        {
                                          "Ref": "AWS::AccountId"
                                        },
                                        ":parameter",
                                        {
                                          "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefcredspecssmparameter4DB3D74868B44AFE"
                                        }
                                      ]
                                    ]
                                  }
                                },
                                {
                                  "Action": [
                                    "s3:Abort*",
                                    "s3:DeleteObject*",
                                    "s3:GetBucket*",
                                    "s3:GetObject*",
                                    "s3:List*",
                                    "s3:PutObject",
                                    "s3:PutObjectLegalHold",
                                    "s3:PutObjectRetention",
                                    "s3:PutObjectTagging",
                                    "s3:PutObjectVersionTagging"
                                  ],
                                  "Effect": "Allow",
                                  "Resource": [
                                    {
                                      "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputFnGetAttcredspecs3bucket2AC0FC3AArnCFB4DF8C"
                                    },
                                    {
                                      "Fn::Join": [
                                        "",
                                        [
                                          {
                                            "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputFnGetAttcredspecs3bucket2AC0FC3AArnCFB4DF8C"
                                          },
                                          "/*"
                                        ]
                                      ]
                                    }
                                  ]
                                }
                              ],
                              "Version": "2012-10-17"
                            },
                            "policyName": "activedirectorymanagementinstanceInstanceRoleDefaultPolicyD7848BE7",
                            "roles": [
                              {
                                "Ref": "activedirectorymanagementinstanceInstanceRole8E7D9EE2"
                              }
                            ]
                          }
                        },
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.aws_iam.CfnPolicy",
                          "version": "2.129.0"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_iam.Policy",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_iam.Role",
                  "version": "2.129.0"
                }
              },
              "InstanceProfile": {
                "id": "InstanceProfile",
                "path": "amazon-ecs-gmsa-linux-bastion/active-directory-management-instance/InstanceProfile",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::IAM::InstanceProfile",
                  "aws:cdk:cloudformation:props": {
                    "roles": [
                      {
                        "Ref": "activedirectorymanagementinstanceInstanceRole8E7D9EE2"
                      }
                    ]
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_iam.CfnInstanceProfile",
                  "version": "2.129.0"
                }
              },
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-bastion/active-directory-management-instance/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::EC2::Instance",
                  "aws:cdk:cloudformation:props": {
                    "availabilityZone": {
                      "Fn::Select": [
                        0,
                        {
                          "Fn::GetAZs": ""
                        }
                      ]
                    },
                    "iamInstanceProfile": {
                      "Ref": "activedirectorymanagementinstanceInstanceProfile055E754F"
                    },
                    "imageId": {
                      "Ref": "SsmParameterValueawsserviceamiwindowslatestWindowsServer2022EnglishFullBaseC96584B6F00A464EAD1953AFF4B05118Parameter"
                    },
                    "instanceType": "t3.large",
                    "keyName": "gmsa",
                    "securityGroupIds": [
                      {
                        "Fn::GetAtt": [
                          "activedirectorymanagementinstanceInstanceSecurityGroup90D500F7",
                          "GroupId"
                        ]
                      }
                    ],
                    "subnetId": {
                      "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefvpcPublicSubnet1Subnet2E65531ECCB85041"
                    },
                    "tags": [
                      {
                        "key": "ad-domain-join",
                        "value": "amazon-ecs-gmsa-linux"
                      },
                      {
                        "key": "Name",
                        "value": "amazon-ecs-gmsa-linux-bastion/active-directory-management-instance"
                      }
                    ],
                    "userData": {
                      "Fn::Base64": {
                        "Fn::Join": [
                          "",
                          [
                            "<powershell>Write-Output \"Installing the Active Directory management tools...\"\nInstall-WindowsFeature -Name \"RSAT-AD-Tools\" -IncludeAllSubFeature\nWrite-Output \"Installing Nuget...\"\nInstall-PackageProvider -Name NuGet -MinimumVersion 2.8.5.201 -Force\nWrite-Output \"Installing CredentialSpec PS module...\"\nInstall-Module CredentialSpec -Force\nWrite-Output \"Installing SqlServer module for Powershell...\"\nInstall-Module -Name SqlServer -Force\nWrite-Output \"Writing support scripts...\"\nRemove-Item \"C:\\SampleConfig\" -Force -Recurse -ErrorAction SilentlyContinue\nNew-Item \"C:\\SampleConfig\" -itemType Directory\nSet-Content -Path \"C:\\SampleConfig\\Configure-AD.ps1\" -Value @\"\n[CmdletBinding()]\nparam(\n    [Parameter()]\n    [string] `$AdDomainName = \"directory.amazon-ecs-gmsa-linux.com\",\n\n    [Parameter()]\n    [string] `$AdAdminUsername = \"admin\",\n\n    [Parameter(Mandatory = `$true)]\n    [SecureString] `$AdAdminPassword,\n\n    [Parameter()]\n    [string] `$GmsaName = \"SampleWebApp\",\n\n    [Parameter()]\n    [string] `$GmsaGroupName = \"SampleWebAppGmsaPrincipals\",\n\n    [Parameter(Mandatory = `$true)]\n    [string] `$GmsaUserName,\n\n    [Parameter(Mandatory = `$true)]\n    [SecureString] `$GmsaUserPassword\n)\n\n# Create AD admin credentials because script is going to run under a non-domain joined state\n`$credential = New-Object -TypeName System.Management.Automation.PSCredential -ArgumentList \"`$AdAdminUsername@`$AdDomainName\", `$AdAdminPassword\n\n\nWrite-Output \"Creating AD security group for gMSA...\"\ntry {\n    Get-AdGroup -Identity `$GmsaGroupName -Server `$AdDomainName  -Credential `$credential | Out-Null\n    Write-Output \"AD group already exists.\"\n}\ncatch {\n    New-ADGroup -Name `$GmsaGroupName -SamAccountName `$GmsaGroupName -GroupScope DomainLocal -Server `$AdDomainName -Credential `$credential\n    Write-Output \"AD group created.\"\n}\n\n\nWrite-Output \"Creating gMSA account...\"\ntry{\n    Get-ADServiceAccount -Identity `$GmsaName -Server `$AdDomainName -Credential `$credential | Out-Null\n    Write-Output \"AD gMSA acount already exists.\"\n}\ncatch{\n    New-ADServiceAccount -Name `$GmsaName -DnsHostName \"`$GmsaName.`$AdDomainName\" -ServicePrincipalNames \"host/`$GmsaName\", \"host/`$GmsaName.`$AdDomainName\" -PrincipalsAllowedToRetrieveManagedPassword `$GmsaGroupName -Server `$AdDomainName -Credential `$credential\n    Write-Output \"AD gMSA created.\"\n}\n\n\nWrite-Output \"Creating AD user...\"\ntry{\n    Get-ADUser -Identity `$GmsaUserName -Server `$AdDomainName -Credential `$credential | Out-Null\n    Write-Output \"AD user already exists.\"\n}\ncatch{\n    New-ADUser -Name `$GmsaUserName  -UserPrincipalName \"`$GmsaUserName@`$AdDomainName\" -Server `$AdDomainName -Credential `$credential\n    Write-Output \"AD user created.\"\n}\n\nWrite-Output \"Resetting AD user password...\"\nSet-ADAccountPassword -Identity `$GmsaUserName -Reset -NewPassword `$GmsaUserPassword -Server `$AdDomainName -Credential `$credential\nEnable-ADAccount -Identity `$GmsaUserName -Server `$AdDomainName -Credential `$credential\n\nWrite-Output \"Adding AD user to gMSA security group...\"\nAdd-ADGroupMember -Identity `$GmsaGroupName -Members \"`$GmsaUserName\" -Server `$AdDomainName -Credential `$credential\n\"@\nSet-Content -Path \"C:\\SampleConfig\\Configure-Database.ps1\" -Value @\"\n[CmdletBinding()]\nparam(\n    [Parameter(Mandatory = `$true)]\n    [string] `$SqlServerInstanceAddress,\n\n    [Parameter(Mandatory = `$true)]\n    [string] `$SqlServerAdminUsername,\n\n    [Parameter(Mandatory = `$true)]\n    [SecureString] `$SqlServerAdminPassword\n)\n\n<# \n    .SYNOPSIS\n    Converts a SecureString into a plain text String.\n\n    .PARAMETER SecureString\n    Secure string to convert.\n#>\nFunction ConvertFrom-SecureString-AsPlainText {\n    [CmdletBinding()]\n    param (\n        [Parameter(\n            Mandatory = `$true,\n            ValueFromPipeline = `$true\n        )]\n        [System.Security.SecureString]\n        `$SecureString\n    )\n    `$bstr = [System.Runtime.InteropServices.Marshal]::SecureStringToBSTR(`$SecureString);\n    `$PlainTextString = [System.Runtime.InteropServices.Marshal]::PtrToStringAuto(`$bstr);\n    `$PlainTextString;\n}\n\nWrite-Output \"Downloading database SQL script...\"\nInvoke-WebRequest -Uri https://raw.githubusercontent.com/lerocha/chinook-database/master/ChinookDatabase/DataSources/Chinook_SqlServer.sql -OutFile \"`$PSScriptRoot\\Chinook.sql\" \n\nWrite-Output \"Creating sample database...\"\nInvoke-Sqlcmd -ServerInstance `$SqlServerInstanceAddress -Username `$SqlServerAdminUsername -Password `$(ConvertFrom-SecureString-AsPlainText `$SqlServerAdminPassword) -InputFile \"`$PSScriptRoot\\Chinook.sql\" -Encrypt Optional\n\nWrite-Output \"Creating SQL login and users for AD principals...\"\nInvoke-Sqlcmd -ServerInstance `$SqlServerInstanceAddress -Username `$SqlServerAdminUsername -Password `$(ConvertFrom-SecureString-AsPlainText `$SqlServerAdminPassword) -InputFile \"`$PSScriptRoot/login.sql\" -Encrypt Optional\n\nWrite-Output \"Making sure the database is onlne...\"\nInvoke-Sqlcmd -ServerInstance `$SqlServerInstanceAddress -Username `$SqlServerAdminUsername -Password `$(ConvertFrom-SecureString-AsPlainText `$SqlServerAdminPassword) -Query \"EXEC rdsadmin.dbo.rds_set_database_online N'Chinook'\" -Encrypt Optional\n\"@\nSet-Content -Path \"C:\\SampleConfig\\login.sql\" -Value @\"\nUSE [master]\nGO\n\n-- Create AD admin SQL Login\nIF NOT EXISTS \n    (SELECT name  \n     FROM sys.server_principals\n     WHERE name = 'directory\\admin')\nBEGIN\n    CREATE LOGIN [directory\\admin] FROM WINDOWS WITH DEFAULT_DATABASE = [Chinook]\n\n    -- These permisions and roles are set to make the ad admin user equal to the RDS admin user\n    GRANT ALTER ANY CONNECTION TO [directory\\admin] WITH GRANT OPTION \n    GRANT ALTER ANY CREDENTIAL TO [directory\\admin] WITH GRANT OPTION \n    GRANT ALTER ANY EVENT SESSION TO [directory\\admin] WITH GRANT OPTION \n    GRANT ALTER ANY LOGIN TO [directory\\admin] WITH GRANT OPTION\n    GRANT ALTER ANY SERVER AUDIT TO [directory\\admin] WITH GRANT OPTION \n    GRANT ALTER ANY SERVER ROLE TO [directory\\admin] WITH GRANT OPTION \n    GRANT ALTER SERVER STATE TO [directory\\admin] WITH GRANT OPTION \n    GRANT ALTER TRACE TO [directory\\admin] WITH GRANT OPTION \n    GRANT CREATE ANY DATABASE TO [directory\\admin] WITH GRANT OPTION \n    GRANT VIEW ANY DATABASE TO [directory\\admin] WITH GRANT OPTION \n    GRANT VIEW ANY DEFINITION TO [directory\\admin] WITH GRANT OPTION \n    GRANT VIEW SERVER STATE TO [directory\\admin] WITH GRANT OPTION \n    ALTER SERVER ROLE [processadmin] ADD MEMBER [directory\\admin]\n    ALTER SERVER ROLE [setupadmin] ADD MEMBER [directory\\admin] \n\n    PRINT 'AD user login created'\nEND\n\n-- Create gMSA SQL Login\nIF NOT EXISTS \n    (SELECT name  \n     FROM sys.server_principals\n     WHERE name = 'directory\\SampleWebApp$')\nBEGIN\n    CREATE LOGIN [directory\\SampleWebApp$] FROM WINDOWS WITH DEFAULT_DATABASE = [Chinook]    \n\n    -- This is necesary for querying sys.dm_exec_connections\n    GRANT VIEW SERVER STATE TO [directory\\SampleWebApp$]\n    \n    PRINT 'AD gMSA login created'\nEND\nGO\n\nUSE [Chinook]\nGO\n\n-- Create AD admin DB user\nIF NOT EXISTS \n    (SELECT name  \n     FROM sys.database_principals\n     WHERE name = 'directory\\admin')\nBEGIN\n    CREATE USER [directory\\admin] FOR LOGIN [directory\\admin] WITH DEFAULT_SCHEMA=[dbo]\n    PRINT 'AD user DB user created'    \nEND\nGO\nEXEC sp_addrolemember N'db_owner', N'directory\\admin'\nGO\n\n-- Create gMSA DB user\nIF NOT EXISTS \n    (SELECT name  \n     FROM sys.database_principals\n     WHERE name = 'directory\\SampleWebApp$')\nBEGIN\n    CREATE USER [directory\\SampleWebApp$] FOR LOGIN [directory\\SampleWebApp$] WITH DEFAULT_SCHEMA=[dbo]\n    PRINT 'AD gMSA DB user created'\nEND\nGO\nEXEC sp_addrolemember N'db_owner', N'directory\\SampleWebApp$'\nGO\n\"@\nSet-Content -Path \"C:\\SampleConfig\\Generate-CredSpec.ps1\" -Value @\"\n[CmdletBinding()]\nparam(\n    [Parameter()]\n    [string] `$SolutionId = \"amazon-ecs-gmsa-linux\",\n\n    [Parameter()]\n    [string] `$AdDomainName = \"directory.amazon-ecs-gmsa-linux.com\",\n\n    [Parameter()]\n    [string] `$GmsaName = \"SampleWebApp\",\n\n    [Parameter()]\n    [string] `$GmsaGroupName = \"SampleWebAppGmsaPrincipals\",\n\n    [Parameter()]\n    [string] `$DomainlessSecretArn = \"",
                            {
                              "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefcredfetcheridentitysecretFEBFB2F237ACC848"
                            },
                            "\",\n\n    [Parameter()]\n    [string] `$CredSpecS3BucketName = \"",
                            {
                              "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefcredspecs3bucket2AC0FC3A928DF580"
                            },
                            "\"\n)\n\n`$ErrorActionPreference = \"Stop\" \n\nWrite-Output \"Generating gMSA credential spec...\"\n`$credSpecFile = New-CredentialSpec -AccountName `$GmsaName -Domain `$AdDomainName -Path \"`$PSScriptRoot\\`$GmsaName.json\"\n\n# Parses CredSpec content\n`$credSpec = Get-Content `$credSpecFile.Path -Raw | ConvertFrom-Json \n\n# Adds \"HostAccountConfig\" if domainless AWS Secret/AWS Parameter was provided\nif (`$DomainlessSecretArn) {\n    Write-Output \"Adding domainless configuration to credential spec...\"\n    `$credSpec.ActiveDirectoryConfig | Add-Member  -NotePropertyName HostAccountConfig -NotePropertyValue @{\n        PortableCcgVersion = \"1\";\n        PluginGUID         = \"{859E1386-BDB4-49E8-85C7-3070B13920E1}\";\n        PluginInput        = @{\n            CredentialArn = `$DomainlessSecretArn\n        };\n    }\n}\n\n# Convert the CredSpec to minimized JSON and saves it to the original file\n`$credSpecContent = `$credSpec | ConvertTo-Json -Depth 5 -Compress\n`$credSpecContent | Set-Content -Path `$credSpecFile.Path\n\nWrite-Output \"Updating SSM Parameter with CredSpec content...\"\nWrite-SSMParameter -Name \"/`$SolutionId/credspec\" -Value `$credSpecContent -Overwrite `$true\n\nWrite-Output \"Updating S3 bucket with CredSpec content...\"\nWrite-S3Object -BucketName `$CredSpecS3BucketName -Key \"`$SolutionId-CredSpec\" -File `$credSpecFile.Path\n\"@\nSet-Content -Path \"C:\\SampleConfig\\Add-ECSContainerInstancesToADGroup.ps1\" -Value @\"\n[CmdletBinding()]\nparam(\n    [Parameter()]\n    `$GmsaGroupName = \"SampleWebAppGmsaPrincipals\",\n\n    [Parameter(Mandatory = `$true)]\n    `$EcsAsgName = \"\"\n)\n\nWrite-Host \"Obtaining Amazon ECS ASG information...\"\n`$ASG = Get-ASAutoScalingGroup -AutoScalingGroupName `$EcsAsgName\n\nforeach (`$actualAsgInstance in `$ASG.Instances) {\n    Write-Host \"Obtaining information for instance `$(`$actualAsgInstance.InstanceId)...\"\n    `$containerInstance = `$(Get-EC2Instance -InstanceId `$actualAsgInstance.InstanceId).Instances\n\n    Write-Host \"Obtaining AD computer object for instance `$(`$actualAsgInstance.InstanceId)...\"\n    `$adComputerDnsName = `$containerInstance.PrivateDnsName.Split('.')[0] #.Substring(0,15)\n    `$adComputer = Get-ADComputer -Filter \"DnsHostName -eq \"\"`$adComputerDnsName\"\"\"\n    \n    Write-Host \"Adding AD computer `$(`$adComputer.Name) to AD group `$GmsaGroupName...\"\n    Add-ADGroupMember -Identity `$GmsaGroupName -Members \"`$(`$adComputer.Name)`$\"\n}\n\nWrite-Host \"Amazon ECS instances added succesfully.\"\n\"@\nWrite-Output \"Getting Active Directory credentials...\"\n$adAdminPasswordSecret = Get-SECSecretValue -SecretId \"",
                            {
                              "Fn::Join": [
                                "-",
                                [
                                  {
                                    "Fn::Select": [
                                      0,
                                      {
                                        "Fn::Split": [
                                          "-",
                                          {
                                            "Fn::Select": [
                                              6,
                                              {
                                                "Fn::Split": [
                                                  ":",
                                                  {
                                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefactivedirectoryadminpasswordsecretB1F8F377D9936D0C"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "Fn::Select": [
                                      1,
                                      {
                                        "Fn::Split": [
                                          "-",
                                          {
                                            "Fn::Select": [
                                              6,
                                              {
                                                "Fn::Split": [
                                                  ":",
                                                  {
                                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefactivedirectoryadminpasswordsecretB1F8F377D9936D0C"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "Fn::Select": [
                                      2,
                                      {
                                        "Fn::Split": [
                                          "-",
                                          {
                                            "Fn::Select": [
                                              6,
                                              {
                                                "Fn::Split": [
                                                  ":",
                                                  {
                                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefactivedirectoryadminpasswordsecretB1F8F377D9936D0C"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "Fn::Select": [
                                      3,
                                      {
                                        "Fn::Split": [
                                          "-",
                                          {
                                            "Fn::Select": [
                                              6,
                                              {
                                                "Fn::Split": [
                                                  ":",
                                                  {
                                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefactivedirectoryadminpasswordsecretB1F8F377D9936D0C"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "Fn::Select": [
                                      4,
                                      {
                                        "Fn::Split": [
                                          "-",
                                          {
                                            "Fn::Select": [
                                              6,
                                              {
                                                "Fn::Split": [
                                                  ":",
                                                  {
                                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefactivedirectoryadminpasswordsecretB1F8F377D9936D0C"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "Fn::Select": [
                                      5,
                                      {
                                        "Fn::Split": [
                                          "-",
                                          {
                                            "Fn::Select": [
                                              6,
                                              {
                                                "Fn::Split": [
                                                  ":",
                                                  {
                                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefactivedirectoryadminpasswordsecretB1F8F377D9936D0C"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "Fn::Select": [
                                      6,
                                      {
                                        "Fn::Split": [
                                          "-",
                                          {
                                            "Fn::Select": [
                                              6,
                                              {
                                                "Fn::Split": [
                                                  ":",
                                                  {
                                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefactivedirectoryadminpasswordsecretB1F8F377D9936D0C"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              ]
                            },
                            "\"\n$adAdminPassword = ConvertTo-SecureString $adAdminPasswordSecret.SecretString  -AsPlainText -Force\n$gmsaUserSecret = Get-SECSecretValue -SecretId \"",
                            {
                              "Fn::Join": [
                                "-",
                                [
                                  {
                                    "Fn::Select": [
                                      0,
                                      {
                                        "Fn::Split": [
                                          "-",
                                          {
                                            "Fn::Select": [
                                              6,
                                              {
                                                "Fn::Split": [
                                                  ":",
                                                  {
                                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefcredfetcheridentitysecretFEBFB2F237ACC848"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "Fn::Select": [
                                      1,
                                      {
                                        "Fn::Split": [
                                          "-",
                                          {
                                            "Fn::Select": [
                                              6,
                                              {
                                                "Fn::Split": [
                                                  ":",
                                                  {
                                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefcredfetcheridentitysecretFEBFB2F237ACC848"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "Fn::Select": [
                                      2,
                                      {
                                        "Fn::Split": [
                                          "-",
                                          {
                                            "Fn::Select": [
                                              6,
                                              {
                                                "Fn::Split": [
                                                  ":",
                                                  {
                                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefcredfetcheridentitysecretFEBFB2F237ACC848"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "Fn::Select": [
                                      3,
                                      {
                                        "Fn::Split": [
                                          "-",
                                          {
                                            "Fn::Select": [
                                              6,
                                              {
                                                "Fn::Split": [
                                                  ":",
                                                  {
                                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefcredfetcheridentitysecretFEBFB2F237ACC848"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "Fn::Select": [
                                      4,
                                      {
                                        "Fn::Split": [
                                          "-",
                                          {
                                            "Fn::Select": [
                                              6,
                                              {
                                                "Fn::Split": [
                                                  ":",
                                                  {
                                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefcredfetcheridentitysecretFEBFB2F237ACC848"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "Fn::Select": [
                                      5,
                                      {
                                        "Fn::Split": [
                                          "-",
                                          {
                                            "Fn::Select": [
                                              6,
                                              {
                                                "Fn::Split": [
                                                  ":",
                                                  {
                                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefcredfetcheridentitysecretFEBFB2F237ACC848"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              ]
                            },
                            "\"\n$gmsaUserName =  $(ConvertFrom-Json $gmsaUserSecret.SecretString).username\n$gmsaUserPassword = ConvertTo-SecureString  $(ConvertFrom-Json $gmsaUserSecret.SecretString).password -AsPlainText -Force\n$sqlServerAdminPasswordSecret = Get-SECSecretValue -SecretId \"",
                            {
                              "Fn::Join": [
                                "-",
                                [
                                  {
                                    "Fn::Select": [
                                      0,
                                      {
                                        "Fn::Split": [
                                          "-",
                                          {
                                            "Fn::Select": [
                                              6,
                                              {
                                                "Fn::Split": [
                                                  ":",
                                                  {
                                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-database:ExportsOutputRefamazonecsgmsalinuxdatabasewebsqlrdsSecret63E60E8B3fdaad7efa858a3daf9490cf0a702aeb74D0F817"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  },
                                  {
                                    "Fn::Select": [
                                      1,
                                      {
                                        "Fn::Split": [
                                          "-",
                                          {
                                            "Fn::Select": [
                                              6,
                                              {
                                                "Fn::Split": [
                                                  ":",
                                                  {
                                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-database:ExportsOutputRefamazonecsgmsalinuxdatabasewebsqlrdsSecret63E60E8B3fdaad7efa858a3daf9490cf0a702aeb74D0F817"
                                                  }
                                                ]
                                              }
                                            ]
                                          }
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              ]
                            },
                            "\"\n$sqlServerAdminUsername = $(ConvertFrom-Json $sqlServerAdminPasswordSecret.SecretString).username\n$sqlServerAdminPassword = ConvertTo-SecureString  $(ConvertFrom-Json $sqlServerAdminPasswordSecret.SecretString).password -AsPlainText -Force\nWrite-Output \"Configuring the Active Directory...\"\nC:\\SampleConfig\\Configure-AD.ps1 -AdAdminPassword $adAdminPassword -GmsaUserName $gmsaUserName -GmsaUserPassword $gmsaUserPassword\nWrite-Output \"Configuring the database...\"\nC:\\SampleConfig\\Configure-Database.ps1 -SqlServerInstanceAddress \"",
                            {
                              "Fn::ImportValue": "amazon-ecs-gmsa-linux-database:ExportsOutputFnGetAttwebsqlrds54E6B542EndpointAddressD5BC949F"
                            },
                            "\" -SqlServerAdminUsername $sqlServerAdminUsername -SqlServerAdminPassword $sqlServerAdminPassword\nWrite-Output \"Installing Chocolatey...\"\niex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))\nImport-Module \"$env:ChocolateyInstall\\helpers\\chocolateyInstaller.psm1\"\nchoco feature enable -n allowGlobalConfirmation\nWrite-Output \"Installing Microsoft SQL Server Management Studio...\"\nchoco install sql-server-management-studio\nWrite-Output \"Configuration complete.\"</powershell>"
                          ]
                        ]
                      }
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ec2.CfnInstance",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_ec2.Instance",
              "version": "2.129.0"
            }
          },
          "SsmParameterValue:--aws--service--ami-windows-latest--Windows_Server-2022-English-Full-Base:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter": {
            "id": "SsmParameterValue:--aws--service--ami-windows-latest--Windows_Server-2022-English-Full-Base:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter",
            "path": "amazon-ecs-gmsa-linux-bastion/SsmParameterValue:--aws--service--ami-windows-latest--Windows_Server-2022-English-Full-Base:C96584B6-F00A-464E-AD19-53AFF4B05118.Parameter",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnParameter",
              "version": "2.129.0"
            }
          },
          "SsmParameterValue:--aws--service--ami-windows-latest--Windows_Server-2022-English-Full-Base:C96584B6-F00A-464E-AD19-53AFF4B05118": {
            "id": "SsmParameterValue:--aws--service--ami-windows-latest--Windows_Server-2022-English-Full-Base:C96584B6-F00A-464E-AD19-53AFF4B05118",
            "path": "amazon-ecs-gmsa-linux-bastion/SsmParameterValue:--aws--service--ami-windows-latest--Windows_Server-2022-English-Full-Base:C96584B6-F00A-464E-AD19-53AFF4B05118",
            "constructInfo": {
              "fqn": "aws-cdk-lib.Resource",
              "version": "2.129.0"
            }
          },
          "domain-join-ss-document": {
            "id": "domain-join-ss-document",
            "path": "amazon-ecs-gmsa-linux-bastion/domain-join-ss-document",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-bastion/domain-join-ss-document/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::IAM::Policy",
                  "aws:cdk:cloudformation:props": {
                    "policyDocument": {
                      "Statement": [
                        {
                          "Action": "ssm:SendCommand",
                          "Effect": "Allow",
                          "Resource": [
                            {
                              "Fn::Join": [
                                "",
                                [
                                  "arn:",
                                  {
                                    "Ref": "AWS::Partition"
                                  },
                                  ":ec2:us-west-2:",
                                  {
                                    "Ref": "AWS::AccountId"
                                  },
                                  ":instance/",
                                  {
                                    "Ref": "activedirectorymanagementinstanceBB5FEB9F"
                                  }
                                ]
                              ]
                            },
                            {
                              "Fn::Join": [
                                "",
                                [
                                  "arn:",
                                  {
                                    "Ref": "AWS::Partition"
                                  },
                                  ":ssm:us-west-2:",
                                  {
                                    "Ref": "AWS::AccountId"
                                  },
                                  ":document/",
                                  {
                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefdomainjoinssmdocumentA1B66A26"
                                  }
                                ]
                              ]
                            }
                          ]
                        }
                      ],
                      "Version": "2012-10-17"
                    },
                    "policyName": "domainjoinssdocument60E00792",
                    "roles": [
                      {
                        "Ref": "activedirectorymanagementinstanceInstanceRole8E7D9EE2"
                      }
                    ]
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_iam.CfnPolicy",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_iam.Policy",
              "version": "2.129.0"
            }
          },
          "ecs-asg-inspect": {
            "id": "ecs-asg-inspect",
            "path": "amazon-ecs-gmsa-linux-bastion/ecs-asg-inspect",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-bastion/ecs-asg-inspect/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::IAM::Policy",
                  "aws:cdk:cloudformation:props": {
                    "policyDocument": {
                      "Statement": [
                        {
                          "Action": [
                            "autoscaling:DescribeAutoScalingGroups",
                            "ec2:DescribeInstances"
                          ],
                          "Effect": "Allow",
                          "Resource": "*"
                        }
                      ],
                      "Version": "2012-10-17"
                    },
                    "policyName": "ecsasginspect16824978",
                    "roles": [
                      {
                        "Ref": "activedirectorymanagementinstanceInstanceRole8E7D9EE2"
                      }
                    ]
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_iam.CfnPolicy",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_iam.Policy",
              "version": "2.129.0"
            }
          },
          "BootstrapVersion": {
            "id": "BootstrapVersion",
            "path": "amazon-ecs-gmsa-linux-bastion/BootstrapVersion",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnParameter",
              "version": "2.129.0"
            }
          },
          "CheckBootstrapVersion": {
            "id": "CheckBootstrapVersion",
            "path": "amazon-ecs-gmsa-linux-bastion/CheckBootstrapVersion",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnRule",
              "version": "2.129.0"
            }
          }
        },
        "constructInfo": {
          "fqn": "aws-cdk-lib.Stack",
          "version": "2.129.0"
        }
      },
      "amazon-ecs-gmsa-linux-application": {
        "id": "amazon-ecs-gmsa-linux-application",
        "path": "amazon-ecs-gmsa-linux-application",
        "children": {
          "ecs-cluster": {
            "id": "ecs-cluster",
            "path": "amazon-ecs-gmsa-linux-application/ecs-cluster",
            "constructInfo": {
              "fqn": "aws-cdk-lib.Resource",
              "version": "2.129.0"
            }
          },
          "web-site-task-execution-role": {
            "id": "web-site-task-execution-role",
            "path": "amazon-ecs-gmsa-linux-application/web-site-task-execution-role",
            "children": {
              "Importweb-site-task-execution-role": {
                "id": "Importweb-site-task-execution-role",
                "path": "amazon-ecs-gmsa-linux-application/web-site-task-execution-role/Importweb-site-task-execution-role",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.Resource",
                  "version": "2.129.0"
                }
              },
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-application/web-site-task-execution-role/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::IAM::Role",
                  "aws:cdk:cloudformation:props": {
                    "assumeRolePolicyDocument": {
                      "Statement": [
                        {
                          "Action": "sts:AssumeRole",
                          "Effect": "Allow",
                          "Principal": {
                            "Service": "ecs-tasks.amazonaws.com"
                          }
                        }
                      ],
                      "Version": "2012-10-17"
                    },
                    "managedPolicyArns": [
                      {
                        "Fn::Join": [
                          "",
                          [
                            "arn:",
                            {
                              "Ref": "AWS::Partition"
                            },
                            ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy"
                          ]
                        ]
                      }
                    ],
                    "roleName": "amazon-ecs-gmsa-linux-web-site-task-execution-role"
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_iam.CfnRole",
                  "version": "2.129.0"
                }
              },
              "DefaultPolicy": {
                "id": "DefaultPolicy",
                "path": "amazon-ecs-gmsa-linux-application/web-site-task-execution-role/DefaultPolicy",
                "children": {
                  "Resource": {
                    "id": "Resource",
                    "path": "amazon-ecs-gmsa-linux-application/web-site-task-execution-role/DefaultPolicy/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::IAM::Policy",
                      "aws:cdk:cloudformation:props": {
                        "policyDocument": {
                          "Statement": [
                            {
                              "Action": [
                                "ssm:DescribeParameters",
                                "ssm:GetParameter",
                                "ssm:GetParameterHistory",
                                "ssm:GetParameters"
                              ],
                              "Effect": "Allow",
                              "Resource": {
                                "Fn::Join": [
                                  "",
                                  [
                                    "arn:",
                                    {
                                      "Ref": "AWS::Partition"
                                    },
                                    ":ssm:us-west-2:",
                                    {
                                      "Ref": "AWS::AccountId"
                                    },
                                    ":parameter",
                                    {
                                      "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefcredspecssmparameter4DB3D74868B44AFE"
                                    }
                                  ]
                                ]
                              }
                            },
                            {
                              "Action": [
                                "s3:GetBucket*",
                                "s3:GetObject*",
                                "s3:List*"
                              ],
                              "Effect": "Allow",
                              "Resource": [
                                {
                                  "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputFnGetAttcredspecs3bucket2AC0FC3AArnCFB4DF8C"
                                },
                                {
                                  "Fn::Join": [
                                    "",
                                    [
                                      {
                                        "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputFnGetAttcredspecs3bucket2AC0FC3AArnCFB4DF8C"
                                      },
                                      "/*"
                                    ]
                                  ]
                                }
                              ]
                            },
                            {
                              "Action": [
                                "secretsmanager:DescribeSecret",
                                "secretsmanager:GetSecretValue"
                              ],
                              "Effect": "Allow",
                              "Resource": {
                                "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefcredfetcheridentitysecretFEBFB2F237ACC848"
                              }
                            },
                            {
                              "Action": [
                                "ecr:BatchCheckLayerAvailability",
                                "ecr:BatchGetImage",
                                "ecr:GetDownloadUrlForLayer"
                              ],
                              "Effect": "Allow",
                              "Resource": {
                                "Fn::GetAtt": [
                                  "websiterepository3D3B4100",
                                  "Arn"
                                ]
                              }
                            },
                            {
                              "Action": "ecr:GetAuthorizationToken",
                              "Effect": "Allow",
                              "Resource": "*"
                            },
                            {
                              "Action": [
                                "logs:CreateLogStream",
                                "logs:PutLogEvents"
                              ],
                              "Effect": "Allow",
                              "Resource": {
                                "Fn::GetAtt": [
                                  "websitetaskdefwebsitecontainerLogGroupC32ECBC6",
                                  "Arn"
                                ]
                              }
                            }
                          ],
                          "Version": "2012-10-17"
                        },
                        "policyName": "websitetaskexecutionroleDefaultPolicy8F71877E",
                        "roles": [
                          {
                            "Ref": "websitetaskexecutionrole64D0C55D"
                          }
                        ]
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_iam.CfnPolicy",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_iam.Policy",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_iam.Role",
              "version": "2.129.0"
            }
          },
          "web-site-repository": {
            "id": "web-site-repository",
            "path": "amazon-ecs-gmsa-linux-application/web-site-repository",
            "children": {
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-application/web-site-repository/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::ECR::Repository",
                  "aws:cdk:cloudformation:props": {
                    "repositoryName": "amazon-ecs-gmsa-linux/web-site"
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ecr.CfnRepository",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_ecr.Repository",
              "version": "2.129.0"
            }
          },
          "web-site-task-def": {
            "id": "web-site-task-def",
            "path": "amazon-ecs-gmsa-linux-application/web-site-task-def",
            "children": {
              "TaskRole": {
                "id": "TaskRole",
                "path": "amazon-ecs-gmsa-linux-application/web-site-task-def/TaskRole",
                "children": {
                  "ImportTaskRole": {
                    "id": "ImportTaskRole",
                    "path": "amazon-ecs-gmsa-linux-application/web-site-task-def/TaskRole/ImportTaskRole",
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.Resource",
                      "version": "2.129.0"
                    }
                  },
                  "Resource": {
                    "id": "Resource",
                    "path": "amazon-ecs-gmsa-linux-application/web-site-task-def/TaskRole/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::IAM::Role",
                      "aws:cdk:cloudformation:props": {
                        "assumeRolePolicyDocument": {
                          "Statement": [
                            {
                              "Action": "sts:AssumeRole",
                              "Effect": "Allow",
                              "Principal": {
                                "Service": "ecs-tasks.amazonaws.com"
                              }
                            }
                          ],
                          "Version": "2012-10-17"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_iam.CfnRole",
                      "version": "2.129.0"
                    }
                  },
                  "DefaultPolicy": {
                    "id": "DefaultPolicy",
                    "path": "amazon-ecs-gmsa-linux-application/web-site-task-def/TaskRole/DefaultPolicy",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "amazon-ecs-gmsa-linux-application/web-site-task-def/TaskRole/DefaultPolicy/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::IAM::Policy",
                          "aws:cdk:cloudformation:props": {
                            "policyDocument": {
                              "Statement": [
                                {
                                  "Action": [
                                    "ssmmessages:CreateControlChannel",
                                    "ssmmessages:CreateDataChannel",
                                    "ssmmessages:OpenControlChannel",
                                    "ssmmessages:OpenDataChannel"
                                  ],
                                  "Effect": "Allow",
                                  "Resource": "*",
                                  "Sid": "EcsExec"
                                },
                                {
                                  "Action": [
                                    "logs:CreateLogStream",
                                    "logs:DescribeLogGroups",
                                    "logs:DescribeLogStreams",
                                    "logs:PutLogEvents",
                                    "ssmmessages:CreateControlChannel",
                                    "ssmmessages:CreateDataChannel",
                                    "ssmmessages:OpenControlChannel",
                                    "ssmmessages:OpenDataChannel"
                                  ],
                                  "Effect": "Allow",
                                  "Resource": "*"
                                }
                              ],
                              "Version": "2012-10-17"
                            },
                            "policyName": "websitetaskdefTaskRoleDefaultPolicyD046FDB1",
                            "roles": [
                              {
                                "Ref": "websitetaskdefTaskRole08B457E5"
                              }
                            ]
                          }
                        },
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.aws_iam.CfnPolicy",
                          "version": "2.129.0"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_iam.Policy",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_iam.Role",
                  "version": "2.129.0"
                }
              },
              "Resource": {
                "id": "Resource",
                "path": "amazon-ecs-gmsa-linux-application/web-site-task-def/Resource",
                "attributes": {
                  "aws:cdk:cloudformation:type": "AWS::ECS::TaskDefinition",
                  "aws:cdk:cloudformation:props": {
                    "containerDefinitions": [
                      {
                        "credentialSpecs": [
                          {
                            "Fn::Join": [
                              "",
                              [
                                "credentialspecdomainless:",
                                {
                                  "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputFnGetAttcredspecs3bucket2AC0FC3AArnCFB4DF8C"
                                },
                                "/amazon-ecs-gmsa-linux-CredSpec"
                              ]
                            ]
                          }
                        ],
                        "essential": true,
                        "image": {
                          "Fn::Join": [
                            "",
                            [
                              {
                                "Fn::Select": [
                                  4,
                                  {
                                    "Fn::Split": [
                                      ":",
                                      {
                                        "Fn::GetAtt": [
                                          "websiterepository3D3B4100",
                                          "Arn"
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              ".dkr.ecr.",
                              {
                                "Fn::Select": [
                                  3,
                                  {
                                    "Fn::Split": [
                                      ":",
                                      {
                                        "Fn::GetAtt": [
                                          "websiterepository3D3B4100",
                                          "Arn"
                                        ]
                                      }
                                    ]
                                  }
                                ]
                              },
                              ".",
                              {
                                "Ref": "AWS::URLSuffix"
                              },
                              "/",
                              {
                                "Ref": "websiterepository3D3B4100"
                              },
                              ":latest"
                            ]
                          ]
                        },
                        "memory": 512,
                        "name": "web-site-container",
                        "portMappings": [
                          {
                            "containerPort": 8080,
                            "protocol": "tcp"
                          }
                        ],
                        "logConfiguration": {
                          "logDriver": "awslogs",
                          "options": {
                            "awslogs-group": {
                              "Ref": "websitetaskdefwebsitecontainerLogGroupC32ECBC6"
                            },
                            "awslogs-stream-prefix": "web",
                            "awslogs-region": "us-west-2"
                          }
                        },
                        "environment": [
                          {
                            "name": "ASPNETCORE_ENVIRONMENT",
                            "value": "Development"
                          },
                          {
                            "name": "ConnectionStrings__Chinook",
                            "value": {
                              "Fn::Join": [
                                "",
                                [
                                  "Server=",
                                  {
                                    "Fn::ImportValue": "amazon-ecs-gmsa-linux-database:ExportsOutputRefwebsqlrds54E6B542D4DEE0E3"
                                  },
                                  ".directory.amazon-ecs-gmsa-linux.com;Database=Chinook;Integrated Security=true;TrustServerCertificate=true;"
                                ]
                              ]
                            }
                          }
                        ],
                        "healthCheck": {
                          "command": [
                            "CMD-SHELL",
                            "curl -f http://localhost:8080/Privacy || exit 1"
                          ],
                          "interval": 30,
                          "retries": 3,
                          "timeout": 5
                        }
                      }
                    ],
                    "cpu": "256",
                    "executionRoleArn": {
                      "Fn::GetAtt": [
                        "websitetaskexecutionrole64D0C55D",
                        "Arn"
                      ]
                    },
                    "family": "amazon-ecs-gmsa-linux-web-site-task",
                    "memory": "512",
                    "networkMode": "awsvpc",
                    "requiresCompatibilities": [
                      "FARGATE"
                    ],
                    "taskRoleArn": {
                      "Fn::GetAtt": [
                        "websitetaskdefTaskRole08B457E5",
                        "Arn"
                      ]
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ecs.CfnTaskDefinition",
                  "version": "2.129.0"
                }
              },
              "web-site-container": {
                "id": "web-site-container",
                "path": "amazon-ecs-gmsa-linux-application/web-site-task-def/web-site-container",
                "children": {
                  "LogGroup": {
                    "id": "LogGroup",
                    "path": "amazon-ecs-gmsa-linux-application/web-site-task-def/web-site-container/LogGroup",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "amazon-ecs-gmsa-linux-application/web-site-task-def/web-site-container/LogGroup/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::Logs::LogGroup",
                          "aws:cdk:cloudformation:props": {}
                        },
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.aws_logs.CfnLogGroup",
                          "version": "2.129.0"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_logs.LogGroup",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ecs.ContainerDefinition",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_ecs.FargateTaskDefinition",
              "version": "2.129.0"
            }
          },
          "web-site-ec2-service": {
            "id": "web-site-ec2-service",
            "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service",
            "children": {
              "LB": {
                "id": "LB",
                "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/LB",
                "children": {
                  "Resource": {
                    "id": "Resource",
                    "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/LB/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
                      "aws:cdk:cloudformation:props": {
                        "loadBalancerAttributes": [
                          {
                            "key": "deletion_protection.enabled",
                            "value": "false"
                          }
                        ],
                        "scheme": "internet-facing",
                        "securityGroups": [
                          {
                            "Fn::GetAtt": [
                              "websiteec2serviceLBSecurityGroup23CDD30B",
                              "GroupId"
                            ]
                          }
                        ],
                        "subnets": [
                          {
                            "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefvpcPublicSubnet1Subnet2E65531ECCB85041"
                          },
                          {
                            "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefvpcPublicSubnet2Subnet009B674FB900C242"
                          }
                        ],
                        "type": "application"
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_elasticloadbalancingv2.CfnLoadBalancer",
                      "version": "2.129.0"
                    }
                  },
                  "SecurityGroup": {
                    "id": "SecurityGroup",
                    "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/LB/SecurityGroup",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/LB/SecurityGroup/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroup",
                          "aws:cdk:cloudformation:props": {
                            "groupDescription": "Automatically created Security Group for ELB amazonecsgmsalinuxapplicationwebsiteec2serviceLBD1A626FE",
                            "securityGroupIngress": [
                              {
                                "cidrIp": "0.0.0.0/0",
                                "ipProtocol": "tcp",
                                "fromPort": 80,
                                "toPort": 80,
                                "description": "Allow from anyone on port 80"
                              }
                            ],
                            "vpcId": {
                              "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefvpcA2121C384D1B3CDE"
                            }
                          }
                        },
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.aws_ec2.CfnSecurityGroup",
                          "version": "2.129.0"
                        }
                      },
                      "to amazonecsgmsalinuxapplicationwebsiteec2serviceServiceSecurityGroup17E86D64:8080": {
                        "id": "to amazonecsgmsalinuxapplicationwebsiteec2serviceServiceSecurityGroup17E86D64:8080",
                        "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/LB/SecurityGroup/to amazonecsgmsalinuxapplicationwebsiteec2serviceServiceSecurityGroup17E86D64:8080",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupEgress",
                          "aws:cdk:cloudformation:props": {
                            "description": "Load balancer to target",
                            "destinationSecurityGroupId": {
                              "Fn::GetAtt": [
                                "websiteec2serviceServiceSecurityGroup14205ACA",
                                "GroupId"
                              ]
                            },
                            "fromPort": 8080,
                            "groupId": {
                              "Fn::GetAtt": [
                                "websiteec2serviceLBSecurityGroup23CDD30B",
                                "GroupId"
                              ]
                            },
                            "ipProtocol": "tcp",
                            "toPort": 8080
                          }
                        },
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.aws_ec2.CfnSecurityGroupEgress",
                          "version": "2.129.0"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.SecurityGroup",
                      "version": "2.129.0"
                    }
                  },
                  "PublicListener": {
                    "id": "PublicListener",
                    "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/LB/PublicListener",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/LB/PublicListener/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::ElasticLoadBalancingV2::Listener",
                          "aws:cdk:cloudformation:props": {
                            "defaultActions": [
                              {
                                "type": "forward",
                                "targetGroupArn": {
                                  "Ref": "websiteec2serviceLBPublicListenerECSGroup5AE8328F"
                                }
                              }
                            ],
                            "loadBalancerArn": {
                              "Ref": "websiteec2serviceLBA6C7A749"
                            },
                            "port": 80,
                            "protocol": "HTTP"
                          }
                        },
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.aws_elasticloadbalancingv2.CfnListener",
                          "version": "2.129.0"
                        }
                      },
                      "ECSGroup": {
                        "id": "ECSGroup",
                        "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/LB/PublicListener/ECSGroup",
                        "children": {
                          "Resource": {
                            "id": "Resource",
                            "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/LB/PublicListener/ECSGroup/Resource",
                            "attributes": {
                              "aws:cdk:cloudformation:type": "AWS::ElasticLoadBalancingV2::TargetGroup",
                              "aws:cdk:cloudformation:props": {
                                "healthCheckPath": "/Privacy",
                                "port": 80,
                                "protocol": "HTTP",
                                "targetGroupAttributes": [
                                  {
                                    "key": "stickiness.enabled",
                                    "value": "false"
                                  }
                                ],
                                "targetType": "ip",
                                "vpcId": {
                                  "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefvpcA2121C384D1B3CDE"
                                }
                              }
                            },
                            "constructInfo": {
                              "fqn": "aws-cdk-lib.aws_elasticloadbalancingv2.CfnTargetGroup",
                              "version": "2.129.0"
                            }
                          }
                        },
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationTargetGroup",
                          "version": "2.129.0"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationListener",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_elasticloadbalancingv2.ApplicationLoadBalancer",
                  "version": "2.129.0"
                }
              },
              "LoadBalancerDNS": {
                "id": "LoadBalancerDNS",
                "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/LoadBalancerDNS",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "ServiceURL": {
                "id": "ServiceURL",
                "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/ServiceURL",
                "constructInfo": {
                  "fqn": "aws-cdk-lib.CfnOutput",
                  "version": "2.129.0"
                }
              },
              "Service": {
                "id": "Service",
                "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/Service",
                "children": {
                  "Service": {
                    "id": "Service",
                    "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/Service/Service",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::ECS::Service",
                      "aws:cdk:cloudformation:props": {
                        "cluster": "amazon-ecs-gmsa-linux",
                        "deploymentConfiguration": {
                          "maximumPercent": 200,
                          "minimumHealthyPercent": 50,
                          "alarms": {
                            "alarmNames": [],
                            "enable": false,
                            "rollback": false
                          }
                        },
                        "desiredCount": 1,
                        "enableEcsManagedTags": false,
                        "enableExecuteCommand": true,
                        "healthCheckGracePeriodSeconds": 60,
                        "launchType": "FARGATE",
                        "loadBalancers": [
                          {
                            "targetGroupArn": {
                              "Ref": "websiteec2serviceLBPublicListenerECSGroup5AE8328F"
                            },
                            "containerName": "web-site-container",
                            "containerPort": 8080
                          }
                        ],
                        "networkConfiguration": {
                          "awsvpcConfiguration": {
                            "assignPublicIp": "DISABLED",
                            "subnets": [
                              {
                                "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefvpcPrivateSubnet1Subnet934893E8236E2271"
                              },
                              {
                                "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefvpcPrivateSubnet2Subnet7031C2BA60DCB1EE"
                              }
                            ],
                            "securityGroups": [
                              {
                                "Fn::GetAtt": [
                                  "websiteec2serviceServiceSecurityGroup14205ACA",
                                  "GroupId"
                                ]
                              }
                            ]
                          }
                        },
                        "taskDefinition": {
                          "Ref": "websitetaskdef45A879FA"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ecs.CfnService",
                      "version": "2.129.0"
                    }
                  },
                  "SecurityGroup": {
                    "id": "SecurityGroup",
                    "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/Service/SecurityGroup",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/Service/SecurityGroup/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroup",
                          "aws:cdk:cloudformation:props": {
                            "groupDescription": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/Service/SecurityGroup",
                            "securityGroupEgress": [
                              {
                                "cidrIp": "0.0.0.0/0",
                                "description": "Allow all outbound traffic by default",
                                "ipProtocol": "-1"
                              }
                            ],
                            "vpcId": {
                              "Fn::ImportValue": "amazon-ecs-gmsa-linux-infrastructure:ExportsOutputRefvpcA2121C384D1B3CDE"
                            }
                          }
                        },
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.aws_ec2.CfnSecurityGroup",
                          "version": "2.129.0"
                        }
                      },
                      "from amazonecsgmsalinuxapplicationwebsiteec2serviceLBSecurityGroup826E28FE:8080": {
                        "id": "from amazonecsgmsalinuxapplicationwebsiteec2serviceLBSecurityGroup826E28FE:8080",
                        "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/Service/SecurityGroup/from amazonecsgmsalinuxapplicationwebsiteec2serviceLBSecurityGroup826E28FE:8080",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupIngress",
                          "aws:cdk:cloudformation:props": {
                            "description": "Load balancer to target",
                            "fromPort": 8080,
                            "groupId": {
                              "Fn::GetAtt": [
                                "websiteec2serviceServiceSecurityGroup14205ACA",
                                "GroupId"
                              ]
                            },
                            "ipProtocol": "tcp",
                            "sourceSecurityGroupId": {
                              "Fn::GetAtt": [
                                "websiteec2serviceLBSecurityGroup23CDD30B",
                                "GroupId"
                              ]
                            },
                            "toPort": 8080
                          }
                        },
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress",
                          "version": "2.129.0"
                        }
                      },
                      "amazonecsgmsalinuxdatabasewebsqlrdsSecurityGroup60623415:1433 to": {
                        "id": "amazonecsgmsalinuxdatabasewebsqlrdsSecurityGroup60623415:1433 to",
                        "path": "amazon-ecs-gmsa-linux-application/web-site-ec2-service/Service/SecurityGroup/amazonecsgmsalinuxdatabasewebsqlrdsSecurityGroup60623415:1433 to",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupIngress",
                          "aws:cdk:cloudformation:props": {
                            "description": "from ECS service",
                            "fromPort": 1433,
                            "groupId": {
                              "Fn::ImportValue": "amazon-ecs-gmsa-linux-database:ExportsOutputFnGetAttwebsqlrdsSecurityGroup41387490GroupId0BC29D94"
                            },
                            "ipProtocol": "tcp",
                            "sourceSecurityGroupId": {
                              "Fn::GetAtt": [
                                "websiteec2serviceServiceSecurityGroup14205ACA",
                                "GroupId"
                              ]
                            },
                            "toPort": 1433
                          }
                        },
                        "constructInfo": {
                          "fqn": "aws-cdk-lib.aws_ec2.CfnSecurityGroupIngress",
                          "version": "2.129.0"
                        }
                      }
                    },
                    "constructInfo": {
                      "fqn": "aws-cdk-lib.aws_ec2.SecurityGroup",
                      "version": "2.129.0"
                    }
                  }
                },
                "constructInfo": {
                  "fqn": "aws-cdk-lib.aws_ecs.FargateService",
                  "version": "2.129.0"
                }
              }
            },
            "constructInfo": {
              "fqn": "aws-cdk-lib.aws_ecs_patterns.ApplicationLoadBalancedFargateService",
              "version": "2.129.0"
            }
          },
          "BootstrapVersion": {
            "id": "BootstrapVersion",
            "path": "amazon-ecs-gmsa-linux-application/BootstrapVersion",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnParameter",
              "version": "2.129.0"
            }
          },
          "CheckBootstrapVersion": {
            "id": "CheckBootstrapVersion",
            "path": "amazon-ecs-gmsa-linux-application/CheckBootstrapVersion",
            "constructInfo": {
              "fqn": "aws-cdk-lib.CfnRule",
              "version": "2.129.0"
            }
          }
        },
        "constructInfo": {
          "fqn": "aws-cdk-lib.Stack",
          "version": "2.129.0"
        }
      },
      "Tree": {
        "id": "Tree",
        "path": "Tree",
        "constructInfo": {
          "fqn": "constructs.Construct",
          "version": "10.2.70"
        }
      }
    },
    "constructInfo": {
      "fqn": "aws-cdk-lib.App",
      "version": "2.129.0"
    }
  }
}